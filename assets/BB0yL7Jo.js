var gn=Object.defineProperty;var _n=(n,F,o)=>F in n?gn(n,F,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[F]=o;var Qe=(n,F,o)=>_n(n,typeof F!="symbol"?F+"":F,o);import{p as ve,i as xe,j as te,s as qe,r as le,k as Fe,l as Vt,m as _e,n as Pt,q as bn,v as be,b as N,x as lt,y as Ft,z as Ye,E as Ue,A as Tt,B as Dt,C as Ut,D as yn,F as Lt,I as Oe,G as bt,H as Nt,J as je,K as Le,L as ke,M as wn,N as Ne,O as kn,h as re,P as xn,Q as Sn,R as jt,S as It,T as it,U as ut,V as $t,W as Cn,e as We,f as $e,g as Re,w as ue,X as An,o as he,d as Ee,t as ge,c as Ce,Y as In,Z as En,$ as Mt,a as Ke,a0 as Ve,a1 as zn,a2 as Bn,a3 as On,a4 as Rn,a5 as Wt,a6 as Vn,a7 as rt,_ as Pn,u as Fn}from"./AENFSEGk.js";import{c as Zt,u as ye,m as ze,M as Ht,a as Gt,b as Kt,d as ct,e as qt,f as Yt,g as Xt,h as dt,i as Tn,j as st,k as yt,l as Jt,n as wt,o as Qt,I as Dn,V as De,p as Un,q as Ln,r as Nn,s as jn,t as $n,v as Mn,R as Wn,w as Zn}from"./BsndiUds.js";import{m as Hn,u as en,L as tn,V as Pe,a as kt,b as xt,c as Gn,d as Kn,e as qn,f as Yn,g as Xn,h as Jn,i as Qn,j as er,k as tr}from"./L5MAzPhz.js";import nr from"./DnZHT7uL.js";import"./C0qAesmu.js";class pt{constructor(F){let{x:o,y:h,width:u,height:e}=F;this.x=o,this.y=h,this.width=u,this.height=e}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function rr(n){const F=n.getBoundingClientRect(),o=getComputedStyle(n),h=o.transform;if(h){let u,e,a,r,c;if(h.startsWith("matrix3d("))u=h.slice(9,-1).split(/, /),e=+u[0],a=+u[5],r=+u[12],c=+u[13];else if(h.startsWith("matrix("))u=h.slice(7,-1).split(/, /),e=+u[0],a=+u[3],r=+u[4],c=+u[5];else return new pt(F);const f=o.transformOrigin,m=F.x-r-(1-e)*parseFloat(f),p=F.y-c-(1-a)*parseFloat(f.slice(f.indexOf(" ")+1)),_=e?F.width/e:n.offsetWidth+1,s=a?F.height/a:n.offsetHeight+1;return new pt({x:m,y:p,width:_,height:s})}else return new pt(F)}function ar(n,F,o){if(typeof n.animate>"u")return{finished:Promise.resolve()};let h;try{h=n.animate(F,o)}catch{return{finished:Promise.resolve()}}return typeof h.finished>"u"&&(h.finished=new Promise(u=>{h.onfinish=()=>{u(h)}})),h}const ir="cubic-bezier(0.4, 0, 0.2, 1)",sr=Zt("v-spacer","div","VSpacer"),nn=Symbol.for("vuetify:form"),or=ve({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function lr(n){const F=xe(n,"modelValue"),o=te(()=>n.disabled),h=te(()=>n.readonly),u=qe(!1),e=le([]),a=le([]);async function r(){const m=[];let p=!0;a.value=[],u.value=!0;for(const _ of e.value){const s=await _.validate();if(s.length>0&&(p=!1,m.push({id:_.id,errorMessages:s})),!p&&n.fastFail)break}return a.value=m,u.value=!1,{valid:p,errors:a.value}}function c(){e.value.forEach(m=>m.reset())}function f(){e.value.forEach(m=>m.resetValidation())}return Fe(e,()=>{let m=0,p=0;const _=[];for(const s of e.value)s.isValid===!1?(p++,_.push({id:s.id,errorMessages:s.errorMessages})):s.isValid===!0&&m++;a.value=_,F.value=p>0?!1:m===e.value.length?!0:null},{deep:!0,flush:"post"}),Vt(nn,{register:m=>{let{id:p,vm:_,validate:s,reset:g,resetValidation:l}=m;e.value.some(v=>v.id===p),e.value.push({id:p,validate:s,reset:g,resetValidation:l,vm:bn(_),isValid:null,errorMessages:[]})},unregister:m=>{e.value=e.value.filter(p=>p.id!==m)},update:(m,p,_)=>{const s=e.value.find(g=>g.id===m);s&&(s.isValid=p,s.errorMessages=_)},isDisabled:o,isReadonly:h,isValidating:u,isValid:F,items:e,validateOn:_e(n,"validateOn")}),{errors:a,isDisabled:o,isReadonly:h,isValidating:u,isValid:F,items:e,validate:r,reset:c,resetValidation:f}}function ur(n){const F=Pt(nn,null);return{...F,isReadonly:te(()=>!!((n==null?void 0:n.readonly)??(F==null?void 0:F.isReadonly.value))),isDisabled:te(()=>!!((n==null?void 0:n.disabled)??(F==null?void 0:F.isDisabled.value)))}}const vt=Symbol("Forwarded refs");function gt(n,F){let o=n;for(;o;){const h=Reflect.getOwnPropertyDescriptor(o,F);if(h)return h;o=Object.getPrototypeOf(o)}}function rn(n){for(var F=arguments.length,o=new Array(F>1?F-1:0),h=1;h<F;h++)o[h-1]=arguments[h];return n[vt]=o,new Proxy(n,{get(u,e){if(Reflect.has(u,e))return Reflect.get(u,e);if(!(typeof e=="symbol"||e.startsWith("$")||e.startsWith("__"))){for(const a of o)if(a.value&&Reflect.has(a.value,e)){const r=Reflect.get(a.value,e);return typeof r=="function"?r.bind(a.value):r}}},has(u,e){if(Reflect.has(u,e))return!0;if(typeof e=="symbol"||e.startsWith("$")||e.startsWith("__"))return!1;for(const a of o)if(a.value&&Reflect.has(a.value,e))return!0;return!1},set(u,e,a){if(Reflect.has(u,e))return Reflect.set(u,e,a);if(typeof e=="symbol"||e.startsWith("$")||e.startsWith("__"))return!1;for(const r of o)if(r.value&&Reflect.has(r.value,e))return Reflect.set(r.value,e,a);return!1},getOwnPropertyDescriptor(u,e){var r;const a=Reflect.getOwnPropertyDescriptor(u,e);if(a)return a;if(!(typeof e=="symbol"||e.startsWith("$")||e.startsWith("__"))){for(const c of o){if(!c.value)continue;const f=gt(c.value,e)??("_"in c.value?gt((r=c.value._)==null?void 0:r.setupState,e):void 0);if(f)return f}for(const c of o){const f=c.value&&c.value[vt];if(!f)continue;const m=f.slice();for(;m.length;){const p=m.shift(),_=gt(p.value,e);if(_)return _;const s=p.value&&p.value[vt];s&&m.push(...s)}}}}})}const cr=ve({...ze(),...or()},"VForm"),dr=be()({name:"VForm",props:cr(),emits:{"update:modelValue":n=>!0,submit:n=>!0},setup(n,F){let{slots:o,emit:h}=F;const u=lr(n),e=le();function a(c){c.preventDefault(),u.reset()}function r(c){const f=c,m=u.validate();f.then=m.then.bind(m),f.catch=m.catch.bind(m),f.finally=m.finally.bind(m),h("submit",f),f.defaultPrevented||m.then(p=>{var s;let{valid:_}=p;_&&((s=e.value)==null||s.submit())}),f.preventDefault()}return ye(()=>{var c;return N("form",{ref:e,class:["v-form",n.class],style:n.style,novalidate:!0,onReset:a,onSubmit:r},[(c=o.default)==null?void 0:c.call(o,u)])}),rn(u,e)}}),fr=ve({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ze(),...Gt({transition:{component:Kt}})},"VCounter"),hr=be()({name:"VCounter",functional:!0,props:fr(),setup(n,F){let{slots:o}=F;const h=te(()=>n.max?`${n.value} / ${n.max}`:String(n.value));return ye(()=>N(Ht,{transition:n.transition},{default:()=>[lt(N("div",{class:["v-counter",{"text-error":n.max&&!n.disabled&&parseFloat(n.value)>parseFloat(n.max)},n.class],style:n.style},[o.default?o.default({counter:h.value,max:n.max,value:n.value}):h.value]),[[Ft,n.active]])]})),{}}}),mr=ve({text:String,onClick:Ue(),...ze(),...Ye()},"VLabel"),an=be()({name:"VLabel",props:mr(),setup(n,F){let{slots:o}=F;return ye(()=>{var h;return N("label",{class:["v-label",{"v-label--clickable":!!n.onClick},n.class],style:n.style,onClick:n.onClick},[n.text,(h=o.default)==null?void 0:h.call(o)])}),{}}}),pr=ve({floating:Boolean,...ze()},"VFieldLabel"),et=be()({name:"VFieldLabel",props:pr(),setup(n,F){let{slots:o}=F;return ye(()=>N(an,{class:["v-field-label",{"v-field-label--floating":n.floating},n.class],style:n.style,"aria-hidden":n.floating||void 0},o)),{}}});function sn(n){const{t:F}=Tt();function o(h){let{name:u}=h;const e={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[u],a=n[`onClick:${u}`];function r(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),f.stopPropagation(),Dt(a,new PointerEvent("click",f)))}const c=a&&e?F(`$vuetify.input.${e}`,n.label??""):void 0;return N(ct,{icon:n[`${u}Icon`],"aria-label":c,onClick:a,onKeydown:r},null)}return{InputIcon:o}}const on=ve({focused:Boolean,"onUpdate:focused":Ue()},"focus");function ft(n){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut();const o=xe(n,"focused"),h=te(()=>({[`${F}--focused`]:o.value}));function u(){o.value=!0}function e(){o.value=!1}return{focusClasses:h,isFocused:o,focus:u,blur:e}}const vr=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],ln=ve({appendInnerIcon:Oe,bgColor:String,clearable:Boolean,clearIcon:{type:Oe,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Oe,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:n=>vr.includes(n)},"onClick:clear":Ue(),"onClick:appendInner":Ue(),"onClick:prependInner":Ue(),...ze(),...Hn(),...qt(),...Ye()},"VField"),un=be()({name:"VField",inheritAttrs:!1,props:{id:String,...on(),...ln()},emits:{"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,F){let{attrs:o,emit:h,slots:u}=F;const{themeClasses:e}=bt(n),{loaderClasses:a}=en(n),{focusClasses:r,isFocused:c,focus:f,blur:m}=ft(n),{InputIcon:p}=sn(n),{roundedClasses:_}=Yt(n),{rtlClasses:s}=Nt(),g=te(()=>n.dirty||n.active),l=te(()=>!!(n.label||u.label)),v=te(()=>!n.singleLine&&l.value),d=je(),y=te(()=>n.id||`input-${d}`),k=te(()=>`${y.value}-messages`),S=le(),C=le(),V=le(),B=te(()=>["plain","underlined"].includes(n.variant)),{backgroundColorClasses:P,backgroundColorStyles:I}=Xt(_e(n,"bgColor")),{textColorClasses:U,textColorStyles:q}=dt(te(()=>n.error||n.disabled?void 0:g.value&&c.value?n.color:n.baseColor));Fe(g,i=>{if(v.value){const D=S.value.$el,X=C.value.$el;requestAnimationFrame(()=>{const L=rr(D),Q=X.getBoundingClientRect(),M=Q.x-L.x,ee=Q.y-L.y-(L.height/2-Q.height/2),R=Q.width/.75,z=Math.abs(R-L.width)>1?{maxWidth:wn(R)}:void 0,J=getComputedStyle(D),K=getComputedStyle(X),G=parseFloat(J.transitionDuration)*1e3||150,ce=parseFloat(K.getPropertyValue("--v-field-label-scale")),me=K.getPropertyValue("color");D.style.visibility="visible",X.style.visibility="hidden",ar(D,{transform:`translate(${M}px, ${ee}px) scale(${ce})`,color:me,...z},{duration:G,easing:ir,direction:i?"normal":"reverse"}).finished.then(()=>{D.style.removeProperty("visibility"),X.style.removeProperty("visibility")})})}},{flush:"post"});const x=te(()=>({isActive:g,isFocused:c,controlRef:V,blur:m,focus:f}));function E(i){i.target!==document.activeElement&&i.preventDefault()}return ye(()=>{var M,ee,R;const i=n.variant==="outlined",D=!!(u["prepend-inner"]||n.prependInnerIcon),X=!!(n.clearable||u.clear)&&!n.disabled,L=!!(u["append-inner"]||n.appendInnerIcon||X),Q=()=>u.label?u.label({...x.value,label:n.label,props:{for:y.value}}):n.label;return N("div",ke({class:["v-field",{"v-field--active":g.value,"v-field--appended":L,"v-field--center-affix":n.centerAffix??!B.value,"v-field--disabled":n.disabled,"v-field--dirty":n.dirty,"v-field--error":n.error,"v-field--flat":n.flat,"v-field--has-background":!!n.bgColor,"v-field--persistent-clear":n.persistentClear,"v-field--prepended":D,"v-field--reverse":n.reverse,"v-field--single-line":n.singleLine,"v-field--no-label":!Q(),[`v-field--variant-${n.variant}`]:!0},e.value,P.value,r.value,a.value,_.value,s.value,n.class],style:[I.value,n.style],onClick:E},o),[N("div",{class:"v-field__overlay"},null),N(tn,{name:"v-field",active:!!n.loading,color:n.error?"error":typeof n.loading=="string"?n.loading:n.color},{default:u.loader}),D&&N("div",{key:"prepend",class:"v-field__prepend-inner"},[n.prependInnerIcon&&N(p,{key:"prepend-icon",name:"prependInner"},null),(M=u["prepend-inner"])==null?void 0:M.call(u,x.value)]),N("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(n.variant)&&v.value&&N(et,{key:"floating-label",ref:C,class:[U.value],floating:!0,for:y.value,style:q.value},{default:()=>[Q()]}),l.value&&N(et,{key:"label",ref:S,for:y.value},{default:()=>[Q()]}),(ee=u.default)==null?void 0:ee.call(u,{...x.value,props:{id:y.value,class:"v-field__input","aria-describedby":k.value},focus:f,blur:m})]),X&&N(Tn,{key:"clear"},{default:()=>[lt(N("div",{class:"v-field__clearable",onMousedown:z=>{z.preventDefault(),z.stopPropagation()}},[N(st,{defaults:{VIcon:{icon:n.clearIcon}}},{default:()=>[u.clear?u.clear({...x.value,props:{onFocus:f,onBlur:m,onClick:n["onClick:clear"]}}):N(p,{name:"clear",onFocus:f,onBlur:m},null)]})]),[[Ft,n.dirty]])]}),L&&N("div",{key:"append",class:"v-field__append-inner"},[(R=u["append-inner"])==null?void 0:R.call(u,x.value),n.appendInnerIcon&&N(p,{key:"append-icon",name:"appendInner"},null)]),N("div",{class:["v-field__outline",U.value],style:q.value},[i&&N(Le,null,[N("div",{class:"v-field__outline__start"},null),v.value&&N("div",{class:"v-field__outline__notch"},[N(et,{ref:C,floating:!0,for:y.value},{default:()=>[Q()]})]),N("div",{class:"v-field__outline__end"},null)]),B.value&&v.value&&N(et,{ref:C,floating:!0,for:y.value},{default:()=>[Q()]})])])}),{controlRef:V}}});function gr(n){const F=Object.keys(un.props).filter(o=>!yn(o)&&o!=="class"&&o!=="style");return Lt(n,F)}const _r=ve({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ze(),...Gt({transition:{component:Kt,leaveAbsolute:!0,group:!0}})},"VMessages"),br=be()({name:"VMessages",props:_r(),setup(n,F){let{slots:o}=F;const h=te(()=>Ne(n.messages)),{textColorClasses:u,textColorStyles:e}=dt(te(()=>n.color));return ye(()=>N(Ht,{transition:n.transition,tag:"div",class:["v-messages",u.value,n.class],style:[e.value,n.style]},{default:()=>[n.active&&h.value.map((a,r)=>N("div",{class:"v-messages__message",key:`${r}-${h.value}`},[o.message?o.message({message:a}):a]))]})),{}}}),yr=ve({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...on()},"validation");function wr(n){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut(),o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:je();const h=xe(n,"modelValue"),u=te(()=>n.validationValue===void 0?h.value:n.validationValue),e=ur(n),a=le([]),r=qe(!0),c=te(()=>!!(Ne(h.value===""?null:h.value).length||Ne(u.value===""?null:u.value).length)),f=te(()=>{var k;return(k=n.errorMessages)!=null&&k.length?Ne(n.errorMessages).concat(a.value).slice(0,Math.max(0,+n.maxErrors)):a.value}),m=te(()=>{var C;let k=(n.validateOn??((C=e.validateOn)==null?void 0:C.value))||"input";k==="lazy"&&(k="input lazy"),k==="eager"&&(k="input eager");const S=new Set((k==null?void 0:k.split(" "))??[]);return{input:S.has("input"),blur:S.has("blur")||S.has("input")||S.has("invalid-input"),invalidInput:S.has("invalid-input"),lazy:S.has("lazy"),eager:S.has("eager")}}),p=te(()=>{var k;return n.error||(k=n.errorMessages)!=null&&k.length?!1:n.rules.length?r.value?a.value.length||m.value.lazy?null:!0:!a.value.length:!0}),_=qe(!1),s=te(()=>({[`${F}--error`]:p.value===!1,[`${F}--dirty`]:c.value,[`${F}--disabled`]:e.isDisabled.value,[`${F}--readonly`]:e.isReadonly.value})),g=kn("validation"),l=te(()=>n.name??re(o));xn(()=>{var k;(k=e.register)==null||k.call(e,{id:l.value,vm:g,validate:y,reset:v,resetValidation:d})}),Sn(()=>{var k;(k=e.unregister)==null||k.call(e,l.value)}),jt(async()=>{var k;m.value.lazy||await y(!m.value.eager),(k=e.update)==null||k.call(e,l.value,p.value,f.value)}),It(()=>m.value.input||m.value.invalidInput&&p.value===!1,()=>{Fe(u,()=>{if(u.value!=null)y();else if(n.focused){const k=Fe(()=>n.focused,S=>{S||y(),k()})}})}),It(()=>m.value.blur,()=>{Fe(()=>n.focused,k=>{k||y()})}),Fe([p,f],()=>{var k;(k=e.update)==null||k.call(e,l.value,p.value,f.value)});async function v(){h.value=null,await it(),await d()}async function d(){r.value=!0,m.value.lazy?a.value=[]:await y(!m.value.eager)}async function y(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const S=[];_.value=!0;for(const C of n.rules){if(S.length>=+(n.maxErrors??1))break;const B=await(typeof C=="function"?C:()=>C)(u.value);if(B!==!0){if(B!==!1&&typeof B!="string"){console.warn(`${B} is not a valid value. Rule functions must return boolean true or a string.`);continue}S.push(B||"")}}return a.value=S,_.value=!1,r.value=k,a.value}return{errorMessages:f,isDirty:c,isDisabled:e.isDisabled,isReadonly:e.isReadonly,isPristine:r,isValid:p,isValidating:_,reset:v,resetValidation:d,validate:y,validationClasses:s}}const ht=ve({id:String,appendIcon:Oe,centerAffix:{type:Boolean,default:!0},prependIcon:Oe,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:n=>["horizontal","vertical"].includes(n)},"onClick:prepend":Ue(),"onClick:append":Ue(),...ze(),...wt(),...Lt(Qt(),["maxWidth","minWidth","width"]),...Ye(),...yr()},"VInput"),Me=be()({name:"VInput",props:{...ht()},emits:{"update:modelValue":n=>!0},setup(n,F){let{attrs:o,slots:h,emit:u}=F;const{densityClasses:e}=yt(n),{dimensionStyles:a}=Jt(n),{themeClasses:r}=bt(n),{rtlClasses:c}=Nt(),{InputIcon:f}=sn(n),m=je(),p=te(()=>n.id||`input-${m}`),_=te(()=>`${p.value}-messages`),{errorMessages:s,isDirty:g,isDisabled:l,isReadonly:v,isPristine:d,isValid:y,isValidating:k,reset:S,resetValidation:C,validate:V,validationClasses:B}=wr(n,"v-input",p),P=te(()=>({id:p,messagesId:_,isDirty:g,isDisabled:l,isReadonly:v,isPristine:d,isValid:y,isValidating:k,reset:S,resetValidation:C,validate:V})),I=te(()=>{var U;return(U=n.errorMessages)!=null&&U.length||!d.value&&s.value.length?s.value:n.hint&&(n.persistentHint||n.focused)?n.hint:n.messages});return ye(()=>{var i,D,X,L;const U=!!(h.prepend||n.prependIcon),q=!!(h.append||n.appendIcon),x=I.value.length>0,E=!n.hideDetails||n.hideDetails==="auto"&&(x||!!h.details);return N("div",{class:["v-input",`v-input--${n.direction}`,{"v-input--center-affix":n.centerAffix,"v-input--hide-spin-buttons":n.hideSpinButtons},e.value,r.value,c.value,B.value,n.class],style:[a.value,n.style]},[U&&N("div",{key:"prepend",class:"v-input__prepend"},[(i=h.prepend)==null?void 0:i.call(h,P.value),n.prependIcon&&N(f,{key:"prepend-icon",name:"prepend"},null)]),h.default&&N("div",{class:"v-input__control"},[(D=h.default)==null?void 0:D.call(h,P.value)]),q&&N("div",{key:"append",class:"v-input__append"},[n.appendIcon&&N(f,{key:"append-icon",name:"append"},null),(X=h.append)==null?void 0:X.call(h,P.value)]),E&&N("div",{id:_.value,class:"v-input__details",role:"alert","aria-live":"polite"},[N(br,{active:x,messages:I.value},{message:h.message}),(L=h.details)==null?void 0:L.call(h,P.value)])])}),{reset:S,resetValidation:C,validate:V,isValid:y,errorMessages:s}}}),kr=["color","file","time","date","datetime-local","week","month"],xr=ve({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...ht(),...ln()},"VTextField"),Sr=be()({name:"VTextField",directives:{Intersect:Dn},inheritAttrs:!1,props:xr(),emits:{"click:control":n=>!0,"mousedown:control":n=>!0,"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,F){let{attrs:o,emit:h,slots:u}=F;const e=xe(n,"modelValue"),{isFocused:a,focus:r,blur:c}=ft(n),f=te(()=>typeof n.counterValue=="function"?n.counterValue(e.value):typeof n.counterValue=="number"?n.counterValue:(e.value??"").toString().length),m=te(()=>{if(o.maxlength)return o.maxlength;if(!(!n.counter||typeof n.counter!="number"&&typeof n.counter!="string"))return n.counter}),p=te(()=>["plain","underlined"].includes(n.variant));function _(V,B){var P,I;!n.autofocus||!V||(I=(P=B[0].target)==null?void 0:P.focus)==null||I.call(P)}const s=le(),g=le(),l=le(),v=te(()=>kr.includes(n.type)||n.persistentPlaceholder||a.value||n.active);function d(){var V;l.value!==document.activeElement&&((V=l.value)==null||V.focus()),a.value||r()}function y(V){h("mousedown:control",V),V.target!==l.value&&(d(),V.preventDefault())}function k(V){d(),h("click:control",V)}function S(V){V.stopPropagation(),d(),it(()=>{e.value=null,Dt(n["onClick:clear"],V)})}function C(V){var P;const B=V.target;if(e.value=B.value,(P=n.modelModifiers)!=null&&P.trim&&["text","search","password","tel","url"].includes(n.type)){const I=[B.selectionStart,B.selectionEnd];it(()=>{B.selectionStart=I[0],B.selectionEnd=I[1]})}}return ye(()=>{const V=!!(u.counter||n.counter!==!1&&n.counter!=null),B=!!(V||u.details),[P,I]=ut(o),{modelValue:U,...q}=Me.filterProps(n),x=gr(n);return N(Me,ke({ref:s,modelValue:e.value,"onUpdate:modelValue":E=>e.value=E,class:["v-text-field",{"v-text-field--prefixed":n.prefix,"v-text-field--suffixed":n.suffix,"v-input--plain-underlined":p.value},n.class],style:n.style},P,q,{centerAffix:!p.value,focused:a.value}),{...u,default:E=>{let{id:i,isDisabled:D,isDirty:X,isReadonly:L,isValid:Q}=E;return N(un,ke({ref:g,onMousedown:y,onClick:k,"onClick:clear":S,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"],role:n.role},x,{id:i.value,active:v.value||X.value,dirty:X.value||n.dirty,disabled:D.value,focused:a.value,error:Q.value===!1}),{...u,default:M=>{let{props:{class:ee,...R}}=M;const z=lt(N("input",ke({ref:l,value:e.value,onInput:C,autofocus:n.autofocus,readonly:L.value,disabled:D.value,name:n.name,placeholder:n.placeholder,size:1,type:n.type,onFocus:d,onBlur:c},R,I),null),[[$t("intersect"),{handler:_},null,{once:!0}]]);return N(Le,null,[n.prefix&&N("span",{class:"v-text-field__prefix"},[N("span",{class:"v-text-field__prefix__text"},[n.prefix])]),u.default?N("div",{class:ee,"data-no-activator":""},[u.default(),z]):Cn(z,{class:ee}),n.suffix&&N("span",{class:"v-text-field__suffix"},[N("span",{class:"v-text-field__suffix__text"},[n.suffix])])])}})},details:B?E=>{var i;return N(Le,null,[(i=u.details)==null?void 0:i.call(u,E),V&&N(Le,null,[N("span",null,null),N(hr,{active:n.persistentCounter||a.value,value:f.value,max:m.value,disabled:n.disabled},u.counter)])])}:void 0})}),rn({},s,g,l)}}),Cr=We({__name:"AlbumUrlForm",props:{modelValue:{type:String,required:!0},isValid:{type:Boolean,required:!0}},emits:["update:modelValue","check","clear"],setup(n){const{t:F}=$e(),o=[h=>!!h||F("url_not_url"),h=>/^((?:https?:\/\/)?[^./]+(?:\.[^./]+)+(?:\/.*)?)$/.test(h)||F("url_not_valid"),h=>h.includes("vk.com")||F("url_not_vk"),h=>h.includes("album")||F("url_not_album"),h=>h.includes("https://")||F("url_not_https")];return(h,u)=>(he(),Re(dr,{"fast-fail":"",onSubmit:u[3]||(u[3]=An(()=>{},["prevent"]))},{default:ue(()=>[N(sr),N(kt,null,{default:ue(()=>[N(De,{cols:"12",md:"8"},{default:ue(()=>[N(Sr,{"model-value":n.modelValue,"onUpdate:modelValue":u[0]||(u[0]=e=>h.$emit("update:modelValue",e)),rules:o,label:"URL",required:""},null,8,["model-value"])]),_:1}),N(De,{cols:"4",md:"2"},{default:ue(()=>[N(Pe,{type:"submit",disabled:!n.isValid,block:"",onClick:u[1]||(u[1]=e=>h.$emit("check"))},{default:ue(()=>[Ee(ge(re(F)("check")),1)]),_:1},8,["disabled"])]),_:1}),N(De,{cols:"4",md:"2"},{default:ue(()=>[N(Pe,{type:"submit",onClick:u[2]||(u[2]=e=>h.$emit("clear"))},{default:ue(()=>[Ee(ge(re(F)("clear")),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ar={class:"d-flex flex-wrap justify-start"},Ir=We({__name:"AlbumSelector",props:{albums:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]}},emits:["toggle-selection"],setup(n){const F=n,o=h=>F.selectedItems.some(u=>u.id===h.id)?"tonal":"outlined";return(h,u)=>(he(),Ce("div",Ar,[(he(!0),Ce(Le,null,In(n.albums,e=>(he(),Re(Pe,{id:e.id,key:e.id,class:"ma-2 pa-2",variant:o(e),onClick:a=>h.$emit("toggle-selection",e)},{default:ue(()=>[Ee(ge(e.title.slice(0,14)),1)]),_:2},1032,["id","variant","onClick"]))),128))]))}}),Er={class:"flex auth"},zr={key:0,class:"logout"},Br={key:1,class:"login"},Or=6,Rr={__name:"VkAuth",setup(n){const{t:F}=$e(),{setError:o}=xt(),{public:{vkAppId:h}}=En(),{$token:u}=Mt(),e=()=>{if(!window.VK){o(F("error_login"));return}VK.Auth.login(r=>{r.session?(console.log("User successfully logged in",r),location.reload()):(console.log("User failed to login or denied access",r),o(F("error_login")))},Or)},a=()=>{if(!window.VK){o(F("error_login"));return}VK.Auth.logout(()=>{})};return jt(()=>{const r=document.createElement("script");r.src="https://vk.com/js/api/openapi.js",r.onload=()=>{console.log("VK openapi is loaded"),VK.init({apiId:h})},document.head.appendChild(r)}),(r,c)=>(he(),Ce("div",Er,[re(u)?(he(),Ce("div",zr,[Ke("p",null,ge(r.$t("logged")),1),N(Pe,{color:"primary",onClick:a},{default:ue(()=>[Ee(ge(r.$t("logout")),1)]),_:1})])):(he(),Ce("div",Br,[N(Pe,{onClick:e},{default:ue(()=>[Ee(ge(r.$t("login")),1)]),_:1})]))]))}};var Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _t={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Et;function Vr(){return Et||(Et=1,function(n,F){(function(o){n.exports=o()})(function(){return function o(h,u,e){function a(f,m){if(!u[f]){if(!h[f]){var p=typeof tt=="function"&&tt;if(!m&&p)return p(f,!0);if(r)return r(f,!0);var _=new Error("Cannot find module '"+f+"'");throw _.code="MODULE_NOT_FOUND",_}var s=u[f]={exports:{}};h[f][0].call(s.exports,function(g){var l=h[f][1][g];return a(l||g)},s,s.exports,o,h,u,e)}return u[f].exports}for(var r=typeof tt=="function"&&tt,c=0;c<e.length;c++)a(e[c]);return a}({1:[function(o,h,u){var e=o("./utils"),a=o("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(c){for(var f,m,p,_,s,g,l,v=[],d=0,y=c.length,k=y,S=e.getTypeOf(c)!=="string";d<c.length;)k=y-d,p=S?(f=c[d++],m=d<y?c[d++]:0,d<y?c[d++]:0):(f=c.charCodeAt(d++),m=d<y?c.charCodeAt(d++):0,d<y?c.charCodeAt(d++):0),_=f>>2,s=(3&f)<<4|m>>4,g=1<k?(15&m)<<2|p>>6:64,l=2<k?63&p:64,v.push(r.charAt(_)+r.charAt(s)+r.charAt(g)+r.charAt(l));return v.join("")},u.decode=function(c){var f,m,p,_,s,g,l=0,v=0,d="data:";if(c.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var y,k=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&k--,c.charAt(c.length-2)===r.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|k):new Array(0|k);l<c.length;)f=r.indexOf(c.charAt(l++))<<2|(_=r.indexOf(c.charAt(l++)))>>4,m=(15&_)<<4|(s=r.indexOf(c.charAt(l++)))>>2,p=(3&s)<<6|(g=r.indexOf(c.charAt(l++))),y[v++]=f,s!==64&&(y[v++]=m),g!==64&&(y[v++]=p);return y}},{"./support":30,"./utils":32}],2:[function(o,h,u){var e=o("./external"),a=o("./stream/DataWorker"),r=o("./stream/Crc32Probe"),c=o("./stream/DataLengthProbe");function f(m,p,_,s,g){this.compressedSize=m,this.uncompressedSize=p,this.crc32=_,this.compression=s,this.compressedContent=g}f.prototype={getContentWorker:function(){var m=new a(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new a(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,_){return m.pipe(new r).pipe(new c("uncompressedSize")).pipe(p.compressWorker(_)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},h.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,h,u){var e=o("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},u.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,h,u){var e=o("./utils"),a=function(){for(var r,c=[],f=0;f<256;f++){r=f;for(var m=0;m<8;m++)r=1&r?3988292384^r>>>1:r>>>1;c[f]=r}return c}();h.exports=function(r,c){return r!==void 0&&r.length?e.getTypeOf(r)!=="string"?function(f,m,p,_){var s=a,g=_+p;f^=-1;for(var l=_;l<g;l++)f=f>>>8^s[255&(f^m[l])];return-1^f}(0|c,r,r.length,0):function(f,m,p,_){var s=a,g=_+p;f^=-1;for(var l=_;l<g;l++)f=f>>>8^s[255&(f^m.charCodeAt(l))];return-1^f}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(o,h,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(o,h,u){var e=null;e=typeof Promise<"u"?Promise:o("lie"),h.exports={Promise:e}},{lie:37}],7:[function(o,h,u){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=o("pako"),r=o("./utils"),c=o("./stream/GenericWorker"),f=e?"uint8array":"array";function m(p,_){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=_,this.meta={}}u.magic="\b\0",r.inherits(m,c),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(f,p.data),!1)},m.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(_){p.push({data:_,meta:p.meta})}},u.compressWorker=function(p){return new m("Deflate",p)},u.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,h,u){function e(s,g){var l,v="";for(l=0;l<g;l++)v+=String.fromCharCode(255&s),s>>>=8;return v}function a(s,g,l,v,d,y){var k,S,C=s.file,V=s.compression,B=y!==f.utf8encode,P=r.transformTo("string",y(C.name)),I=r.transformTo("string",f.utf8encode(C.name)),U=C.comment,q=r.transformTo("string",y(U)),x=r.transformTo("string",f.utf8encode(U)),E=I.length!==C.name.length,i=x.length!==U.length,D="",X="",L="",Q=C.dir,M=C.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};g&&!l||(ee.crc32=s.crc32,ee.compressedSize=s.compressedSize,ee.uncompressedSize=s.uncompressedSize);var R=0;g&&(R|=8),B||!E&&!i||(R|=2048);var z=0,J=0;Q&&(z|=16),d==="UNIX"?(J=798,z|=function(G,ce){var me=G;return G||(me=ce?16893:33204),(65535&me)<<16}(C.unixPermissions,Q)):(J=20,z|=function(G){return 63&(G||0)}(C.dosPermissions)),k=M.getUTCHours(),k<<=6,k|=M.getUTCMinutes(),k<<=5,k|=M.getUTCSeconds()/2,S=M.getUTCFullYear()-1980,S<<=4,S|=M.getUTCMonth()+1,S<<=5,S|=M.getUTCDate(),E&&(X=e(1,1)+e(m(P),4)+I,D+="up"+e(X.length,2)+X),i&&(L=e(1,1)+e(m(q),4)+x,D+="uc"+e(L.length,2)+L);var K="";return K+=`
\0`,K+=e(R,2),K+=V.magic,K+=e(k,2),K+=e(S,2),K+=e(ee.crc32,4),K+=e(ee.compressedSize,4),K+=e(ee.uncompressedSize,4),K+=e(P.length,2),K+=e(D.length,2),{fileRecord:p.LOCAL_FILE_HEADER+K+P+D,dirRecord:p.CENTRAL_FILE_HEADER+e(J,2)+K+e(q.length,2)+"\0\0\0\0"+e(z,4)+e(v,4)+P+D+q}}var r=o("../utils"),c=o("../stream/GenericWorker"),f=o("../utf8"),m=o("../crc32"),p=o("../signature");function _(s,g,l,v){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=l,this.encodeFileName=v,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(_,c),_.prototype.push=function(s){var g=s.meta.percent||0,l=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,c.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:l?(g+100*(l-v-1))/l:100}}))},_.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var g=this.streamFiles&&!s.file.dir;if(g){var l=a(s,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(s){this.accumulate=!1;var g=this.streamFiles&&!s.file.dir,l=a(s,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),g)this.push({data:function(v){return p.DATA_DESCRIPTOR+e(v.crc32,4)+e(v.compressedSize,4)+e(v.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var s=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var l=this.bytesWritten-s,v=function(d,y,k,S,C){var V=r.transformTo("string",C(S));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+e(d,2)+e(d,2)+e(y,4)+e(k,4)+e(V.length,2)+V}(this.dirRecords.length,l,s,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(s){this._sources.push(s);var g=this;return s.on("data",function(l){g.processChunk(l)}),s.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),s.on("error",function(l){g.error(l)}),this},_.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(s){var g=this._sources;if(!c.prototype.error.call(this,s))return!1;for(var l=0;l<g.length;l++)try{g[l].error(s)}catch{}return!0},_.prototype.lock=function(){c.prototype.lock.call(this);for(var s=this._sources,g=0;g<s.length;g++)s[g].lock()},h.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,h,u){var e=o("../compressions"),a=o("./ZipFileWorker");u.generateWorker=function(r,c,f){var m=new a(c.streamFiles,f,c.platform,c.encodeFileName),p=0;try{r.forEach(function(_,s){p++;var g=function(y,k){var S=y||k,C=e[S];if(!C)throw new Error(S+" is not a valid compression method !");return C}(s.options.compression,c.compression),l=s.options.compressionOptions||c.compressionOptions||{},v=s.dir,d=s.date;s._compressWorker(g,l).withStreamInfo("file",{name:_,dir:v,date:d,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,h,u){function e(){if(!(this instanceof e))return new e;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new e;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(e.prototype=o("./object")).loadAsync=o("./load"),e.support=o("./support"),e.defaults=o("./defaults"),e.version="3.10.1",e.loadAsync=function(a,r){return new e().loadAsync(a,r)},e.external=o("./external"),h.exports=e},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,h,u){var e=o("./utils"),a=o("./external"),r=o("./utf8"),c=o("./zipEntries"),f=o("./stream/Crc32Probe"),m=o("./nodejsUtils");function p(_){return new a.Promise(function(s,g){var l=_.decompressed.getContentWorker().pipe(new f);l.on("error",function(v){g(v)}).on("end",function(){l.streamInfo.crc32!==_.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}h.exports=function(_,s){var g=this;return s=e.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),m.isNode&&m.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",_,!0,s.optimizedBinaryString,s.base64).then(function(l){var v=new c(s);return v.load(l),v}).then(function(l){var v=[a.Promise.resolve(l)],d=l.files;if(s.checkCRC32)for(var y=0;y<d.length;y++)v.push(p(d[y]));return a.Promise.all(v)}).then(function(l){for(var v=l.shift(),d=v.files,y=0;y<d.length;y++){var k=d[y],S=k.fileNameStr,C=e.resolve(k.fileNameStr);g.file(C,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:s.createFolders}),k.dir||(g.file(C).unsafeOriginalName=S)}return v.zipComment.length&&(g.comment=v.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,h,u){var e=o("../utils"),a=o("../stream/GenericWorker");function r(c,f){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}e.inherits(r,a),r.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,h,u){var e=o("readable-stream").Readable;function a(r,c,f){e.call(this,c),this._helper=r;var m=this;r.on("data",function(p,_){m.push(p)||m._helper.pause(),f&&f(_)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}o("../utils").inherits(a,e),a.prototype._read=function(){this._helper.resume()},h.exports=a},{"../utils":32,"readable-stream":16}],14:[function(o,h,u){h.exports={isNode:typeof Buffer<"u",newBufferFrom:function(e,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,a);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,a)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var a=new Buffer(e);return a.fill(0),a},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}},{}],15:[function(o,h,u){function e(C,V,B){var P,I=r.getTypeOf(V),U=r.extend(B||{},m);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(C=d(C)),U.createFolders&&(P=v(C))&&y.call(this,P,!0);var q=I==="string"&&U.binary===!1&&U.base64===!1;B&&B.binary!==void 0||(U.binary=!q),(V instanceof p&&V.uncompressedSize===0||U.dir||!V||V.length===0)&&(U.base64=!1,U.binary=!0,V="",U.compression="STORE",I="string");var x=null;x=V instanceof p||V instanceof c?V:g.isNode&&g.isStream(V)?new l(C,V):r.prepareContent(C,V,U.binary,U.optimizedBinaryString,U.base64);var E=new _(C,x,U);this.files[C]=E}var a=o("./utf8"),r=o("./utils"),c=o("./stream/GenericWorker"),f=o("./stream/StreamHelper"),m=o("./defaults"),p=o("./compressedObject"),_=o("./zipObject"),s=o("./generate"),g=o("./nodejsUtils"),l=o("./nodejs/NodejsStreamInputAdapter"),v=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var V=C.lastIndexOf("/");return 0<V?C.substring(0,V):""},d=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},y=function(C,V){return V=V!==void 0?V:m.createFolders,C=d(C),this.files[C]||e.call(this,C,null,{dir:!0,createFolders:V}),this.files[C]};function k(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var V,B,P;for(V in this.files)P=this.files[V],(B=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&C(B,P)},filter:function(C){var V=[];return this.forEach(function(B,P){C(B,P)&&V.push(P)}),V},file:function(C,V,B){if(arguments.length!==1)return C=this.root+C,e.call(this,C,V,B),this;if(k(C)){var P=C;return this.filter(function(U,q){return!q.dir&&P.test(U)})}var I=this.files[this.root+C];return I&&!I.dir?I:null},folder:function(C){if(!C)return this;if(k(C))return this.filter(function(I,U){return U.dir&&C.test(I)});var V=this.root+C,B=y.call(this,V),P=this.clone();return P.root=B.name,P},remove:function(C){C=this.root+C;var V=this.files[C];if(V||(C.slice(-1)!=="/"&&(C+="/"),V=this.files[C]),V&&!V.dir)delete this.files[C];else for(var B=this.filter(function(I,U){return U.name.slice(0,C.length)===C}),P=0;P<B.length;P++)delete this.files[B[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var V,B={};try{if((B=r.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");r.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var P=B.comment||this.comment||"";V=s.generateWorker(this,B,P)}catch(I){(V=new c("error")).error(I)}return new f(V,B.type||"string",B.mimeType)},generateAsync:function(C,V){return this.generateInternalStream(C).accumulate(V)},generateNodeStream:function(C,V){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(V)}};h.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,h,u){h.exports=o("stream")},{stream:void 0}],17:[function(o,h,u){var e=o("./DataReader");function a(r){e.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}o("../utils").inherits(a,e),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),f=r.charCodeAt(1),m=r.charCodeAt(2),p=r.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===c&&this.data[_+1]===f&&this.data[_+2]===m&&this.data[_+3]===p)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),f=r.charCodeAt(1),m=r.charCodeAt(2),p=r.charCodeAt(3),_=this.readData(4);return c===_[0]&&f===_[1]&&m===_[2]&&p===_[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},h.exports=a},{"../utils":32,"./DataReader":18}],18:[function(o,h,u){var e=o("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,f=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=r,f},readString:function(r){return e.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},h.exports=a},{"../utils":32}],19:[function(o,h,u){var e=o("./Uint8ArrayReader");function a(r){e.call(this,r)}o("../utils").inherits(a,e),a.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},h.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,h,u){var e=o("./DataReader");function a(r){e.call(this,r)}o("../utils").inherits(a,e),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},h.exports=a},{"../utils":32,"./DataReader":18}],21:[function(o,h,u){var e=o("./ArrayReader");function a(r){e.call(this,r)}o("../utils").inherits(a,e),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},h.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(o,h,u){var e=o("../utils"),a=o("../support"),r=o("./ArrayReader"),c=o("./StringReader"),f=o("./NodeBufferReader"),m=o("./Uint8ArrayReader");h.exports=function(p){var _=e.getTypeOf(p);return e.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new f(p):a.uint8array?new m(e.transformTo("uint8array",p)):new r(e.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,h,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,h,u){var e=o("./GenericWorker"),a=o("../utils");function r(c){e.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(r,e),r.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},h.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(o,h,u){var e=o("./GenericWorker"),a=o("../crc32");function r(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(r,e),r.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},h.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,h,u){var e=o("../utils"),a=o("./GenericWorker");function r(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}e.inherits(r,a),r.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}a.prototype.processChunk.call(this,c)},h.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(o,h,u){var e=o("../utils"),a=o("./GenericWorker");function r(c){a.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=e.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}e.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(o,h,u){function e(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}e.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(c){r.processChunk(c)}),a.on("end",function(){r.end()}),a.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},h.exports=e},{}],29:[function(o,h,u){var e=o("../utils"),a=o("./ConvertWorker"),r=o("./GenericWorker"),c=o("../base64"),f=o("../support"),m=o("../external"),p=null;if(f.nodestream)try{p=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(g,l){return new m.Promise(function(v,d){var y=[],k=g._internalType,S=g._outputType,C=g._mimeType;g.on("data",function(V,B){y.push(V),l&&l(B)}).on("error",function(V){y=[],d(V)}).on("end",function(){try{var V=function(B,P,I){switch(B){case"blob":return e.newBlob(e.transformTo("arraybuffer",P),I);case"base64":return c.encode(P);default:return e.transformTo(B,P)}}(S,function(B,P){var I,U=0,q=null,x=0;for(I=0;I<P.length;I++)x+=P[I].length;switch(B){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(q=new Uint8Array(x),I=0;I<P.length;I++)q.set(P[I],U),U+=P[I].length;return q;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+B+"'")}}(k,y),C);v(V)}catch(B){d(B)}y=[]}).resume()})}function s(g,l,v){var d=l;switch(l){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=l,this._mimeType=v,e.checkSupport(d),this._worker=g.pipe(new a(d)),g.lock()}catch(y){this._worker=new r("error"),this._worker.error(y)}}s.prototype={accumulate:function(g){return _(this,g)},on:function(g,l){var v=this;return g==="data"?this._worker.on(g,function(d){l.call(v,d.data,d.meta)}):this._worker.on(g,function(){e.delay(l,arguments,v)}),this},resume:function(){return e.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(e.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},g)}},h.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,h,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var e=new ArrayBuffer(0);try{u.blob=new Blob([e],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(e),u.blob=a.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!o("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(o,h,u){for(var e=o("./utils"),a=o("./support"),r=o("./nodejsUtils"),c=o("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function _(){c.call(this,"utf-8 encode")}u.utf8encode=function(s){return a.nodebuffer?r.newBufferFrom(s,"utf-8"):function(g){var l,v,d,y,k,S=g.length,C=0;for(y=0;y<S;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<S&&(64512&(d=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(d-56320),y++),C+=v<128?1:v<2048?2:v<65536?3:4;for(l=a.uint8array?new Uint8Array(C):new Array(C),y=k=0;k<C;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<S&&(64512&(d=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(d-56320),y++),v<128?l[k++]=v:(v<2048?l[k++]=192|v>>>6:(v<65536?l[k++]=224|v>>>12:(l[k++]=240|v>>>18,l[k++]=128|v>>>12&63),l[k++]=128|v>>>6&63),l[k++]=128|63&v);return l}(s)},u.utf8decode=function(s){return a.nodebuffer?e.transformTo("nodebuffer",s).toString("utf-8"):function(g){var l,v,d,y,k=g.length,S=new Array(2*k);for(l=v=0;l<k;)if((d=g[l++])<128)S[v++]=d;else if(4<(y=f[d]))S[v++]=65533,l+=y-1;else{for(d&=y===2?31:y===3?15:7;1<y&&l<k;)d=d<<6|63&g[l++],y--;1<y?S[v++]=65533:d<65536?S[v++]=d:(d-=65536,S[v++]=55296|d>>10&1023,S[v++]=56320|1023&d)}return S.length!==v&&(S.subarray?S=S.subarray(0,v):S.length=v),e.applyFromCharCode(S)}(s=e.transformTo(a.uint8array?"uint8array":"array",s))},e.inherits(p,c),p.prototype.processChunk=function(s){var g=e.transformTo(a.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var l=g;(g=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),g.set(l,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var v=function(y,k){var S;for((k=k||y.length)>y.length&&(k=y.length),S=k-1;0<=S&&(192&y[S])==128;)S--;return S<0||S===0?k:S+f[y[S]]>k?S:k}(g),d=g;v!==g.length&&(a.uint8array?(d=g.subarray(0,v),this.leftOver=g.subarray(v,g.length)):(d=g.slice(0,v),this.leftOver=g.slice(v,g.length))),this.push({data:u.utf8decode(d),meta:s.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=p,e.inherits(_,c),_.prototype.processChunk=function(s){this.push({data:u.utf8encode(s.data),meta:s.meta})},u.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,h,u){var e=o("./support"),a=o("./base64"),r=o("./nodejsUtils"),c=o("./external");function f(l){return l}function m(l,v){for(var d=0;d<l.length;++d)v[d]=255&l.charCodeAt(d);return v}o("setimmediate"),u.newBlob=function(l,v){u.checkSupport("blob");try{return new Blob([l],{type:v})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(l),d.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(l,v,d){var y=[],k=0,S=l.length;if(S<=d)return String.fromCharCode.apply(null,l);for(;k<S;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,l.slice(k,Math.min(k+d,S)))):y.push(String.fromCharCode.apply(null,l.subarray(k,Math.min(k+d,S)))),k+=d;return y.join("")},stringifyByChar:function(l){for(var v="",d=0;d<l.length;d++)v+=String.fromCharCode(l[d]);return v},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function _(l){var v=65536,d=u.getTypeOf(l),y=!0;if(d==="uint8array"?y=p.applyCanBeUsed.uint8array:d==="nodebuffer"&&(y=p.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return p.stringifyByChunk(l,d,v)}catch{v=Math.floor(v/2)}return p.stringifyByChar(l)}function s(l,v){for(var d=0;d<l.length;d++)v[d]=l[d];return v}u.applyFromCharCode=_;var g={};g.string={string:f,array:function(l){return m(l,new Array(l.length))},arraybuffer:function(l){return g.string.uint8array(l).buffer},uint8array:function(l){return m(l,new Uint8Array(l.length))},nodebuffer:function(l){return m(l,r.allocBuffer(l.length))}},g.array={string:_,array:f,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return r.newBufferFrom(l)}},g.arraybuffer={string:function(l){return _(new Uint8Array(l))},array:function(l){return s(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:f,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return r.newBufferFrom(new Uint8Array(l))}},g.uint8array={string:_,array:function(l){return s(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:f,nodebuffer:function(l){return r.newBufferFrom(l)}},g.nodebuffer={string:_,array:function(l){return s(l,new Array(l.length))},arraybuffer:function(l){return g.nodebuffer.uint8array(l).buffer},uint8array:function(l){return s(l,new Uint8Array(l.length))},nodebuffer:f},u.transformTo=function(l,v){if(v=v||"",!l)return v;u.checkSupport(l);var d=u.getTypeOf(v);return g[d][l](v)},u.resolve=function(l){for(var v=l.split("/"),d=[],y=0;y<v.length;y++){var k=v[y];k==="."||k===""&&y!==0&&y!==v.length-1||(k===".."?d.pop():d.push(k))}return d.join("/")},u.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":e.nodebuffer&&r.isBuffer(l)?"nodebuffer":e.uint8array&&l instanceof Uint8Array?"uint8array":e.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(l){if(!e[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(l){var v,d,y="";for(d=0;d<(l||"").length;d++)y+="\\x"+((v=l.charCodeAt(d))<16?"0":"")+v.toString(16).toUpperCase();return y},u.delay=function(l,v,d){setImmediate(function(){l.apply(d||null,v||[])})},u.inherits=function(l,v){function d(){}d.prototype=v.prototype,l.prototype=new d},u.extend=function(){var l,v,d={};for(l=0;l<arguments.length;l++)for(v in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],v)&&d[v]===void 0&&(d[v]=arguments[l][v]);return d},u.prepareContent=function(l,v,d,y,k){return c.Promise.resolve(v).then(function(S){return e.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(C,V){var B=new FileReader;B.onload=function(P){C(P.target.result)},B.onerror=function(P){V(P.target.error)},B.readAsArrayBuffer(S)}):S}).then(function(S){var C=u.getTypeOf(S);return C?(C==="arraybuffer"?S=u.transformTo("uint8array",S):C==="string"&&(k?S=a.decode(S):d&&y!==!0&&(S=function(V){return m(V,e.uint8array?new Uint8Array(V.length):new Array(V.length))}(S))),S):c.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,h,u){var e=o("./reader/readerFor"),a=o("./utils"),r=o("./signature"),c=o("./zipEntry"),f=o("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(p)+")")}},isSignature:function(p,_){var s=this.reader.index;this.reader.setIndex(p);var g=this.reader.readString(4)===_;return this.reader.setIndex(s),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),_=f.uint8array?"uint8array":"array",s=a.transformTo(_,p);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,_,s,g=this.zip64EndOfCentralSize-44;0<g;)p=this.reader.readInt(2),_=this.reader.readInt(4),s=this.reader.readData(_),this.zip64ExtensibleData[p]={id:p,length:_,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,_;for(p=0;p<this.files.length;p++)_=this.files[p],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var _=p;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var g=_-s;if(0<g)this.isSignature(_,r.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(p){this.reader=e(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,h,u){var e=o("./reader/readerFor"),a=o("./utils"),r=o("./compressedObject"),c=o("./crc32"),f=o("./utf8"),m=o("./compressions"),p=o("./support");function _(s,g){this.options=s,this.loadOptions=g}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var g,l;if(s.skip(22),this.fileNameLength=s.readInt(2),l=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(v){for(var d in m)if(Object.prototype.hasOwnProperty.call(m,d)&&m[d].magic===v)return m[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,g,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var g=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(g),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=e(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var g,l,v,d=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<d;)g=s.readInt(2),l=s.readInt(2),v=s.readData(l),this.extraFields[g]={id:g,length:l,value:v};s.setIndex(d)},handleUTF8:function(){var s=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var l=a.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var d=a.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var g=e(s.value);return g.readInt(1)!==1||c(this.fileName)!==g.readInt(4)?null:f.utf8decode(g.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var g=e(s.value);return g.readInt(1)!==1||c(this.fileComment)!==g.readInt(4)?null:f.utf8decode(g.readData(s.length-5))}return null}},h.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,h,u){function e(g,l,v){this.name=g,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=l,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var a=o("./stream/StreamHelper"),r=o("./stream/DataWorker"),c=o("./utf8"),f=o("./compressedObject"),m=o("./stream/GenericWorker");e.prototype={internalStream:function(g){var l=null,v="string";try{if(!g)throw new Error("No output type specified.");var d=(v=g.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),l=this._decompressWorker();var y=!this._dataBinary;y&&!d&&(l=l.pipe(new c.Utf8EncodeWorker)),!y&&d&&(l=l.pipe(new c.Utf8DecodeWorker))}catch(k){(l=new m("error")).error(k)}return new a(l,v,"")},async:function(g,l){return this.internalStream(g).accumulate(l)},nodeStream:function(g,l){return this.internalStream(g||"nodebuffer").toNodejsStream(l)},_compressWorker:function(g,l){if(this._data instanceof f&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(v,g,l)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new r(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<p.length;s++)e.prototype[p[s]]=_;h.exports=e},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,h,u){(function(e){var a,r,c=e.MutationObserver||e.WebKitMutationObserver;if(c){var f=0,m=new c(g),p=e.document.createTextNode("");m.observe(p,{characterData:!0}),a=function(){p.data=f=++f%2}}else if(e.setImmediate||e.MessageChannel===void 0)a="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var l=e.document.createElement("script");l.onreadystatechange=function(){g(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},e.document.documentElement.appendChild(l)}:function(){setTimeout(g,0)};else{var _=new e.MessageChannel;_.port1.onmessage=g,a=function(){_.port2.postMessage(0)}}var s=[];function g(){var l,v;r=!0;for(var d=s.length;d;){for(v=s,s=[],l=-1;++l<d;)v[l]();d=s.length}r=!1}h.exports=function(l){s.push(l)!==1||r||a()}}).call(this,typeof Te<"u"?Te:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,h,u){var e=o("immediate");function a(){}var r={},c=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,d!==a&&l(this,d)}function _(d,y,k){this.promise=d,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function s(d,y,k){e(function(){var S;try{S=y(k)}catch(C){return r.reject(d,C)}S===d?r.reject(d,new TypeError("Cannot resolve promise with itself")):r.resolve(d,S)})}function g(d){var y=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof y=="function")return function(){y.apply(d,arguments)}}function l(d,y){var k=!1;function S(B){k||(k=!0,r.reject(d,B))}function C(B){k||(k=!0,r.resolve(d,B))}var V=v(function(){y(C,S)});V.status==="error"&&S(V.value)}function v(d,y){var k={};try{k.value=d(y),k.status="success"}catch(S){k.status="error",k.value=S}return k}(h.exports=p).prototype.finally=function(d){if(typeof d!="function")return this;var y=this.constructor;return this.then(function(k){return y.resolve(d()).then(function(){return k})},function(k){return y.resolve(d()).then(function(){throw k})})},p.prototype.catch=function(d){return this.then(null,d)},p.prototype.then=function(d,y){if(typeof d!="function"&&this.state===f||typeof y!="function"&&this.state===c)return this;var k=new this.constructor(a);return this.state!==m?s(k,this.state===f?d:y,this.outcome):this.queue.push(new _(k,d,y)),k},_.prototype.callFulfilled=function(d){r.resolve(this.promise,d)},_.prototype.otherCallFulfilled=function(d){s(this.promise,this.onFulfilled,d)},_.prototype.callRejected=function(d){r.reject(this.promise,d)},_.prototype.otherCallRejected=function(d){s(this.promise,this.onRejected,d)},r.resolve=function(d,y){var k=v(g,y);if(k.status==="error")return r.reject(d,k.value);var S=k.value;if(S)l(d,S);else{d.state=f,d.outcome=y;for(var C=-1,V=d.queue.length;++C<V;)d.queue[C].callFulfilled(y)}return d},r.reject=function(d,y){d.state=c,d.outcome=y;for(var k=-1,S=d.queue.length;++k<S;)d.queue[k].callRejected(y);return d},p.resolve=function(d){return d instanceof this?d:r.resolve(new this(a),d)},p.reject=function(d){var y=new this(a);return r.reject(y,d)},p.all=function(d){var y=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,S=!1;if(!k)return this.resolve([]);for(var C=new Array(k),V=0,B=-1,P=new this(a);++B<k;)I(d[B],B);return P;function I(U,q){y.resolve(U).then(function(x){C[q]=x,++V!==k||S||(S=!0,r.resolve(P,C))},function(x){S||(S=!0,r.reject(P,x))})}},p.race=function(d){var y=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,S=!1;if(!k)return this.resolve([]);for(var C=-1,V=new this(a);++C<k;)B=d[C],y.resolve(B).then(function(P){S||(S=!0,r.resolve(V,P))},function(P){S||(S=!0,r.reject(V,P))});var B;return V}},{immediate:36}],38:[function(o,h,u){var e={};(0,o("./lib/utils/common").assign)(e,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),h.exports=e},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,h,u){var e=o("./zlib/deflate"),a=o("./utils/common"),r=o("./utils/strings"),c=o("./zlib/messages"),f=o("./zlib/zstream"),m=Object.prototype.toString,p=0,_=-1,s=0,g=8;function l(d){if(!(this instanceof l))return new l(d);this.options=a.assign({level:_,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},d||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var k=e.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(k!==p)throw new Error(c[k]);if(y.header&&e.deflateSetHeader(this.strm,y.header),y.dictionary){var S;if(S=typeof y.dictionary=="string"?r.string2buf(y.dictionary):m.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(k=e.deflateSetDictionary(this.strm,S))!==p)throw new Error(c[k]);this._dict_set=!0}}function v(d,y){var k=new l(y);if(k.push(d,!0),k.err)throw k.msg||c[k.err];return k.result}l.prototype.push=function(d,y){var k,S,C=this.strm,V=this.options.chunkSize;if(this.ended)return!1;S=y===~~y?y:y===!0?4:0,typeof d=="string"?C.input=r.string2buf(d):m.call(d)==="[object ArrayBuffer]"?C.input=new Uint8Array(d):C.input=d,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new a.Buf8(V),C.next_out=0,C.avail_out=V),(k=e.deflate(C,S))!==1&&k!==p)return this.onEnd(k),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(C.output,C.next_out))):this.onData(a.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&k!==1);return S===4?(k=e.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===p):S!==2||(this.onEnd(p),!(C.avail_out=0))},l.prototype.onData=function(d){this.chunks.push(d)},l.prototype.onEnd=function(d){d===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},u.Deflate=l,u.deflate=v,u.deflateRaw=function(d,y){return(y=y||{}).raw=!0,v(d,y)},u.gzip=function(d,y){return(y=y||{}).gzip=!0,v(d,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,h,u){var e=o("./zlib/inflate"),a=o("./utils/common"),r=o("./utils/strings"),c=o("./zlib/constants"),f=o("./zlib/messages"),m=o("./zlib/zstream"),p=o("./zlib/gzheader"),_=Object.prototype.toString;function s(l){if(!(this instanceof s))return new s(l);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},l||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||l&&l.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var d=e.inflateInit2(this.strm,v.windowBits);if(d!==c.Z_OK)throw new Error(f[d]);this.header=new p,e.inflateGetHeader(this.strm,this.header)}function g(l,v){var d=new s(v);if(d.push(l,!0),d.err)throw d.msg||f[d.err];return d.result}s.prototype.push=function(l,v){var d,y,k,S,C,V,B=this.strm,P=this.options.chunkSize,I=this.options.dictionary,U=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof l=="string"?B.input=r.binstring2buf(l):_.call(l)==="[object ArrayBuffer]"?B.input=new Uint8Array(l):B.input=l,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new a.Buf8(P),B.next_out=0,B.avail_out=P),(d=e.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&I&&(V=typeof I=="string"?r.string2buf(I):_.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,d=e.inflateSetDictionary(this.strm,V)),d===c.Z_BUF_ERROR&&U===!0&&(d=c.Z_OK,U=!1),d!==c.Z_STREAM_END&&d!==c.Z_OK)return this.onEnd(d),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&d!==c.Z_STREAM_END&&(B.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=r.utf8border(B.output,B.next_out),S=B.next_out-k,C=r.buf2string(B.output,k),B.next_out=S,B.avail_out=P-S,S&&a.arraySet(B.output,B.output,k,S,0),this.onData(C)):this.onData(a.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(U=!0)}while((0<B.avail_in||B.avail_out===0)&&d!==c.Z_STREAM_END);return d===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(d=e.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},s.prototype.onData=function(l){this.chunks.push(l)},s.prototype.onEnd=function(l){l===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},u.Inflate=s,u.inflate=g,u.inflateRaw=function(l,v){return(v=v||{}).raw=!0,g(l,v)},u.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,h,u){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(c[p]=m[p])}}return c},u.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var a={arraySet:function(c,f,m,p,_){if(f.subarray&&c.subarray)c.set(f.subarray(m,m+p),_);else for(var s=0;s<p;s++)c[_+s]=f[m+s]},flattenChunks:function(c){var f,m,p,_,s,g;for(f=p=0,m=c.length;f<m;f++)p+=c[f].length;for(g=new Uint8Array(p),f=_=0,m=c.length;f<m;f++)s=c[f],g.set(s,_),_+=s.length;return g}},r={arraySet:function(c,f,m,p,_){for(var s=0;s<p;s++)c[_+s]=f[m+s]},flattenChunks:function(c){return[].concat.apply([],c)}};u.setTyped=function(c){c?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,a)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,r))},u.setTyped(e)},{}],42:[function(o,h,u){var e=o("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new e.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,_){if(_<65537&&(p.subarray&&r||!p.subarray&&a))return String.fromCharCode.apply(null,e.shrinkBuf(p,_));for(var s="",g=0;g<_;g++)s+=String.fromCharCode(p[g]);return s}c[254]=c[254]=1,u.string2buf=function(p){var _,s,g,l,v,d=p.length,y=0;for(l=0;l<d;l++)(64512&(s=p.charCodeAt(l)))==55296&&l+1<d&&(64512&(g=p.charCodeAt(l+1)))==56320&&(s=65536+(s-55296<<10)+(g-56320),l++),y+=s<128?1:s<2048?2:s<65536?3:4;for(_=new e.Buf8(y),l=v=0;v<y;l++)(64512&(s=p.charCodeAt(l)))==55296&&l+1<d&&(64512&(g=p.charCodeAt(l+1)))==56320&&(s=65536+(s-55296<<10)+(g-56320),l++),s<128?_[v++]=s:(s<2048?_[v++]=192|s>>>6:(s<65536?_[v++]=224|s>>>12:(_[v++]=240|s>>>18,_[v++]=128|s>>>12&63),_[v++]=128|s>>>6&63),_[v++]=128|63&s);return _},u.buf2binstring=function(p){return m(p,p.length)},u.binstring2buf=function(p){for(var _=new e.Buf8(p.length),s=0,g=_.length;s<g;s++)_[s]=p.charCodeAt(s);return _},u.buf2string=function(p,_){var s,g,l,v,d=_||p.length,y=new Array(2*d);for(s=g=0;s<d;)if((l=p[s++])<128)y[g++]=l;else if(4<(v=c[l]))y[g++]=65533,s+=v-1;else{for(l&=v===2?31:v===3?15:7;1<v&&s<d;)l=l<<6|63&p[s++],v--;1<v?y[g++]=65533:l<65536?y[g++]=l:(l-=65536,y[g++]=55296|l>>10&1023,y[g++]=56320|1023&l)}return m(y,g)},u.utf8border=function(p,_){var s;for((_=_||p.length)>p.length&&(_=p.length),s=_-1;0<=s&&(192&p[s])==128;)s--;return s<0||s===0?_:s+c[p[s]]>_?s:_}},{"./common":41}],43:[function(o,h,u){h.exports=function(e,a,r,c){for(var f=65535&e|0,m=e>>>16&65535|0,p=0;r!==0;){for(r-=p=2e3<r?2e3:r;m=m+(f=f+a[c++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(o,h,u){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,h,u){var e=function(){for(var a,r=[],c=0;c<256;c++){a=c;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;r[c]=a}return r}();h.exports=function(a,r,c,f){var m=e,p=f+c;a^=-1;for(var _=f;_<p;_++)a=a>>>8^m[255&(a^r[_])];return-1^a}},{}],46:[function(o,h,u){var e,a=o("../utils/common"),r=o("./trees"),c=o("./adler32"),f=o("./crc32"),m=o("./messages"),p=0,_=4,s=0,g=-2,l=-1,v=4,d=2,y=8,k=9,S=286,C=30,V=19,B=2*S+1,P=15,I=3,U=258,q=U+I+1,x=42,E=113,i=1,D=2,X=3,L=4;function Q(t,j){return t.msg=m[j],j}function M(t){return(t<<1)-(4<t?9:0)}function ee(t){for(var j=t.length;0<=--j;)t[j]=0}function R(t){var j=t.state,T=j.pending;T>t.avail_out&&(T=t.avail_out),T!==0&&(a.arraySet(t.output,j.pending_buf,j.pending_out,T,t.next_out),t.next_out+=T,j.pending_out+=T,t.total_out+=T,t.avail_out-=T,j.pending-=T,j.pending===0&&(j.pending_out=0))}function z(t,j){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,j),t.block_start=t.strstart,R(t.strm)}function J(t,j){t.pending_buf[t.pending++]=j}function K(t,j){t.pending_buf[t.pending++]=j>>>8&255,t.pending_buf[t.pending++]=255&j}function G(t,j){var T,w,b=t.max_chain_length,A=t.strstart,$=t.prev_length,W=t.nice_match,O=t.strstart>t.w_size-q?t.strstart-(t.w_size-q):0,Z=t.window,Y=t.w_mask,H=t.prev,ne=t.strstart+U,oe=Z[A+$-1],ie=Z[A+$];t.prev_length>=t.good_match&&(b>>=2),W>t.lookahead&&(W=t.lookahead);do if(Z[(T=j)+$]===ie&&Z[T+$-1]===oe&&Z[T]===Z[A]&&Z[++T]===Z[A+1]){A+=2,T++;do;while(Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&Z[++A]===Z[++T]&&A<ne);if(w=U-(ne-A),A=ne-U,$<w){if(t.match_start=j,W<=($=w))break;oe=Z[A+$-1],ie=Z[A+$]}}while((j=H[j&Y])>O&&--b!=0);return $<=t.lookahead?$:t.lookahead}function ce(t){var j,T,w,b,A,$,W,O,Z,Y,H=t.w_size;do{if(b=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-q)){for(a.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,j=T=t.hash_size;w=t.head[--j],t.head[j]=H<=w?w-H:0,--T;);for(j=T=H;w=t.prev[--j],t.prev[j]=H<=w?w-H:0,--T;);b+=H}if(t.strm.avail_in===0)break;if($=t.strm,W=t.window,O=t.strstart+t.lookahead,Z=b,Y=void 0,Y=$.avail_in,Z<Y&&(Y=Z),T=Y===0?0:($.avail_in-=Y,a.arraySet(W,$.input,$.next_in,Y,O),$.state.wrap===1?$.adler=c($.adler,W,Y,O):$.state.wrap===2&&($.adler=f($.adler,W,Y,O)),$.next_in+=Y,$.total_in+=Y,Y),t.lookahead+=T,t.lookahead+t.insert>=I)for(A=t.strstart-t.insert,t.ins_h=t.window[A],t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+I-1])&t.hash_mask,t.prev[A&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=A,A++,t.insert--,!(t.lookahead+t.insert<I)););}while(t.lookahead<q&&t.strm.avail_in!==0)}function me(t,j){for(var T,w;;){if(t.lookahead<q){if(ce(t),t.lookahead<q&&j===p)return i;if(t.lookahead===0)break}if(T=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),T!==0&&t.strstart-T<=t.w_size-q&&(t.match_length=G(t,T)),t.match_length>=I)if(w=r._tr_tally(t,t.strstart-t.match_start,t.match_length-I),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=I){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else w=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(w&&(z(t,!1),t.strm.avail_out===0))return i}return t.insert=t.strstart<I-1?t.strstart:I-1,j===_?(z(t,!0),t.strm.avail_out===0?X:L):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?i:D}function ae(t,j){for(var T,w,b;;){if(t.lookahead<q){if(ce(t),t.lookahead<q&&j===p)return i;if(t.lookahead===0)break}if(T=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=I-1,T!==0&&t.prev_length<t.max_lazy_match&&t.strstart-T<=t.w_size-q&&(t.match_length=G(t,T),t.match_length<=5&&(t.strategy===1||t.match_length===I&&4096<t.strstart-t.match_start)&&(t.match_length=I-1)),t.prev_length>=I&&t.match_length<=t.prev_length){for(b=t.strstart+t.lookahead-I,w=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-I),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=I-1,t.strstart++,w&&(z(t,!1),t.strm.avail_out===0))return i}else if(t.match_available){if((w=r._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return i}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(w=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<I-1?t.strstart:I-1,j===_?(z(t,!0),t.strm.avail_out===0?X:L):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?i:D}function se(t,j,T,w,b){this.good_length=t,this.max_lazy=j,this.nice_length=T,this.max_chain=w,this.func=b}function pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*B),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*V+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(P+1),this.heap=new a.Buf16(2*S+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*S+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(t){var j;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=d,(j=t.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?x:E,t.adler=j.wrap===2?0:1,j.last_flush=p,r._tr_init(j),s):Q(t,g)}function Ae(t){var j=de(t);return j===s&&function(T){T.window_size=2*T.w_size,ee(T.head),T.max_lazy_match=e[T.level].max_lazy,T.good_match=e[T.level].good_length,T.nice_match=e[T.level].nice_length,T.max_chain_length=e[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=I-1,T.match_available=0,T.ins_h=0}(t.state),j}function Se(t,j,T,w,b,A){if(!t)return g;var $=1;if(j===l&&(j=6),w<0?($=0,w=-w):15<w&&($=2,w-=16),b<1||k<b||T!==y||w<8||15<w||j<0||9<j||A<0||v<A)return Q(t,g);w===8&&(w=9);var W=new pe;return(t.state=W).strm=t,W.wrap=$,W.gzhead=null,W.w_bits=w,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=b+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+I-1)/I),W.window=new a.Buf8(2*W.w_size),W.head=new a.Buf16(W.hash_size),W.prev=new a.Buf16(W.w_size),W.lit_bufsize=1<<b+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new a.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=j,W.strategy=A,W.method=T,Ae(t)}e=[new se(0,0,0,0,function(t,j){var T=65535;for(T>t.pending_buf_size-5&&(T=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ce(t),t.lookahead===0&&j===p)return i;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var w=t.block_start+T;if((t.strstart===0||t.strstart>=w)&&(t.lookahead=t.strstart-w,t.strstart=w,z(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-q&&(z(t,!1),t.strm.avail_out===0))return i}return t.insert=0,j===_?(z(t,!0),t.strm.avail_out===0?X:L):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),i)}),new se(4,4,8,4,me),new se(4,5,16,8,me),new se(4,6,32,32,me),new se(4,4,16,16,ae),new se(8,16,32,32,ae),new se(8,16,128,128,ae),new se(8,32,128,256,ae),new se(32,128,258,1024,ae),new se(32,258,258,4096,ae)],u.deflateInit=function(t,j){return Se(t,j,y,15,8,0)},u.deflateInit2=Se,u.deflateReset=Ae,u.deflateResetKeep=de,u.deflateSetHeader=function(t,j){return t&&t.state?t.state.wrap!==2?g:(t.state.gzhead=j,s):g},u.deflate=function(t,j){var T,w,b,A;if(!t||!t.state||5<j||j<0)return t?Q(t,g):g;if(w=t.state,!t.output||!t.input&&t.avail_in!==0||w.status===666&&j!==_)return Q(t,t.avail_out===0?-5:g);if(w.strm=t,T=w.last_flush,w.last_flush=j,w.status===x)if(w.wrap===2)t.adler=0,J(w,31),J(w,139),J(w,8),w.gzhead?(J(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),J(w,255&w.gzhead.time),J(w,w.gzhead.time>>8&255),J(w,w.gzhead.time>>16&255),J(w,w.gzhead.time>>24&255),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(J(w,255&w.gzhead.extra.length),J(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(t.adler=f(t.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(J(w,0),J(w,0),J(w,0),J(w,0),J(w,0),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,3),w.status=E);else{var $=y+(w.w_bits-8<<4)<<8;$|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&($|=32),$+=31-$%31,w.status=E,K(w,$),w.strstart!==0&&(K(w,t.adler>>>16),K(w,65535&t.adler)),t.adler=1}if(w.status===69)if(w.gzhead.extra){for(b=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),R(t),b=w.pending,w.pending!==w.pending_buf_size));)J(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),R(t),b=w.pending,w.pending===w.pending_buf_size)){A=1;break}A=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,J(w,A)}while(A!==0);w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),A===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),R(t),b=w.pending,w.pending===w.pending_buf_size)){A=1;break}A=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,J(w,A)}while(A!==0);w.gzhead.hcrc&&w.pending>b&&(t.adler=f(t.adler,w.pending_buf,w.pending-b,b)),A===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&R(t),w.pending+2<=w.pending_buf_size&&(J(w,255&t.adler),J(w,t.adler>>8&255),t.adler=0,w.status=E)):w.status=E),w.pending!==0){if(R(t),t.avail_out===0)return w.last_flush=-1,s}else if(t.avail_in===0&&M(j)<=M(T)&&j!==_)return Q(t,-5);if(w.status===666&&t.avail_in!==0)return Q(t,-5);if(t.avail_in!==0||w.lookahead!==0||j!==p&&w.status!==666){var W=w.strategy===2?function(O,Z){for(var Y;;){if(O.lookahead===0&&(ce(O),O.lookahead===0)){if(Z===p)return i;break}if(O.match_length=0,Y=r._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,Y&&(z(O,!1),O.strm.avail_out===0))return i}return O.insert=0,Z===_?(z(O,!0),O.strm.avail_out===0?X:L):O.last_lit&&(z(O,!1),O.strm.avail_out===0)?i:D}(w,j):w.strategy===3?function(O,Z){for(var Y,H,ne,oe,ie=O.window;;){if(O.lookahead<=U){if(ce(O),O.lookahead<=U&&Z===p)return i;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=I&&0<O.strstart&&(H=ie[ne=O.strstart-1])===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]){oe=O.strstart+U;do;while(H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&H===ie[++ne]&&ne<oe);O.match_length=U-(oe-ne),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=I?(Y=r._tr_tally(O,1,O.match_length-I),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(Y=r._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),Y&&(z(O,!1),O.strm.avail_out===0))return i}return O.insert=0,Z===_?(z(O,!0),O.strm.avail_out===0?X:L):O.last_lit&&(z(O,!1),O.strm.avail_out===0)?i:D}(w,j):e[w.level].func(w,j);if(W!==X&&W!==L||(w.status=666),W===i||W===X)return t.avail_out===0&&(w.last_flush=-1),s;if(W===D&&(j===1?r._tr_align(w):j!==5&&(r._tr_stored_block(w,0,0,!1),j===3&&(ee(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),R(t),t.avail_out===0))return w.last_flush=-1,s}return j!==_?s:w.wrap<=0?1:(w.wrap===2?(J(w,255&t.adler),J(w,t.adler>>8&255),J(w,t.adler>>16&255),J(w,t.adler>>24&255),J(w,255&t.total_in),J(w,t.total_in>>8&255),J(w,t.total_in>>16&255),J(w,t.total_in>>24&255)):(K(w,t.adler>>>16),K(w,65535&t.adler)),R(t),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?s:1)},u.deflateEnd=function(t){var j;return t&&t.state?(j=t.state.status)!==x&&j!==69&&j!==73&&j!==91&&j!==103&&j!==E&&j!==666?Q(t,g):(t.state=null,j===E?Q(t,-3):s):g},u.deflateSetDictionary=function(t,j){var T,w,b,A,$,W,O,Z,Y=j.length;if(!t||!t.state||(A=(T=t.state).wrap)===2||A===1&&T.status!==x||T.lookahead)return g;for(A===1&&(t.adler=c(t.adler,j,Y,0)),T.wrap=0,Y>=T.w_size&&(A===0&&(ee(T.head),T.strstart=0,T.block_start=0,T.insert=0),Z=new a.Buf8(T.w_size),a.arraySet(Z,j,Y-T.w_size,T.w_size,0),j=Z,Y=T.w_size),$=t.avail_in,W=t.next_in,O=t.input,t.avail_in=Y,t.next_in=0,t.input=j,ce(T);T.lookahead>=I;){for(w=T.strstart,b=T.lookahead-(I-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[w+I-1])&T.hash_mask,T.prev[w&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=w,w++,--b;);T.strstart=w,T.lookahead=I-1,ce(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=I-1,T.match_available=0,t.next_in=W,t.input=O,t.avail_in=$,T.wrap=A,s},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,h,u){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,h,u){h.exports=function(e,a){var r,c,f,m,p,_,s,g,l,v,d,y,k,S,C,V,B,P,I,U,q,x,E,i,D;r=e.state,c=e.next_in,i=e.input,f=c+(e.avail_in-5),m=e.next_out,D=e.output,p=m-(a-e.avail_out),_=m+(e.avail_out-257),s=r.dmax,g=r.wsize,l=r.whave,v=r.wnext,d=r.window,y=r.hold,k=r.bits,S=r.lencode,C=r.distcode,V=(1<<r.lenbits)-1,B=(1<<r.distbits)-1;e:do{k<15&&(y+=i[c++]<<k,k+=8,y+=i[c++]<<k,k+=8),P=S[y&V];t:for(;;){if(y>>>=I=P>>>24,k-=I,(I=P>>>16&255)===0)D[m++]=65535&P;else{if(!(16&I)){if((64&I)==0){P=S[(65535&P)+(y&(1<<I)-1)];continue t}if(32&I){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}U=65535&P,(I&=15)&&(k<I&&(y+=i[c++]<<k,k+=8),U+=y&(1<<I)-1,y>>>=I,k-=I),k<15&&(y+=i[c++]<<k,k+=8,y+=i[c++]<<k,k+=8),P=C[y&B];n:for(;;){if(y>>>=I=P>>>24,k-=I,!(16&(I=P>>>16&255))){if((64&I)==0){P=C[(65535&P)+(y&(1<<I)-1)];continue n}e.msg="invalid distance code",r.mode=30;break e}if(q=65535&P,k<(I&=15)&&(y+=i[c++]<<k,(k+=8)<I&&(y+=i[c++]<<k,k+=8)),s<(q+=y&(1<<I)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(y>>>=I,k-=I,(I=m-p)<q){if(l<(I=q-I)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=d,(x=0)===v){if(x+=g-I,I<U){for(U-=I;D[m++]=d[x++],--I;);x=m-q,E=D}}else if(v<I){if(x+=g+v-I,(I-=v)<U){for(U-=I;D[m++]=d[x++],--I;);if(x=0,v<U){for(U-=I=v;D[m++]=d[x++],--I;);x=m-q,E=D}}}else if(x+=v-I,I<U){for(U-=I;D[m++]=d[x++],--I;);x=m-q,E=D}for(;2<U;)D[m++]=E[x++],D[m++]=E[x++],D[m++]=E[x++],U-=3;U&&(D[m++]=E[x++],1<U&&(D[m++]=E[x++]))}else{for(x=m-q;D[m++]=D[x++],D[m++]=D[x++],D[m++]=D[x++],2<(U-=3););U&&(D[m++]=D[x++],1<U&&(D[m++]=D[x++]))}break}}break}}while(c<f&&m<_);c-=U=k>>3,y&=(1<<(k-=U<<3))-1,e.next_in=c,e.next_out=m,e.avail_in=c<f?f-c+5:5-(c-f),e.avail_out=m<_?_-m+257:257-(m-_),r.hold=y,r.bits=k}},{}],49:[function(o,h,u){var e=o("../utils/common"),a=o("./adler32"),r=o("./crc32"),c=o("./inffast"),f=o("./inftrees"),m=1,p=2,_=0,s=-2,g=1,l=852,v=592;function d(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(x){var E;return x&&x.state?(E=x.state,x.total_in=x.total_out=E.total=0,x.msg="",E.wrap&&(x.adler=1&E.wrap),E.mode=g,E.last=0,E.havedict=0,E.dmax=32768,E.head=null,E.hold=0,E.bits=0,E.lencode=E.lendyn=new e.Buf32(l),E.distcode=E.distdyn=new e.Buf32(v),E.sane=1,E.back=-1,_):s}function S(x){var E;return x&&x.state?((E=x.state).wsize=0,E.whave=0,E.wnext=0,k(x)):s}function C(x,E){var i,D;return x&&x.state?(D=x.state,E<0?(i=0,E=-E):(i=1+(E>>4),E<48&&(E&=15)),E&&(E<8||15<E)?s:(D.window!==null&&D.wbits!==E&&(D.window=null),D.wrap=i,D.wbits=E,S(x))):s}function V(x,E){var i,D;return x?(D=new y,(x.state=D).window=null,(i=C(x,E))!==_&&(x.state=null),i):s}var B,P,I=!0;function U(x){if(I){var E;for(B=new e.Buf32(512),P=new e.Buf32(32),E=0;E<144;)x.lens[E++]=8;for(;E<256;)x.lens[E++]=9;for(;E<280;)x.lens[E++]=7;for(;E<288;)x.lens[E++]=8;for(f(m,x.lens,0,288,B,0,x.work,{bits:9}),E=0;E<32;)x.lens[E++]=5;f(p,x.lens,0,32,P,0,x.work,{bits:5}),I=!1}x.lencode=B,x.lenbits=9,x.distcode=P,x.distbits=5}function q(x,E,i,D){var X,L=x.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new e.Buf8(L.wsize)),D>=L.wsize?(e.arraySet(L.window,E,i-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(D<(X=L.wsize-L.wnext)&&(X=D),e.arraySet(L.window,E,i-D,X,L.wnext),(D-=X)?(e.arraySet(L.window,E,i-D,D,0),L.wnext=D,L.whave=L.wsize):(L.wnext+=X,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=X))),0}u.inflateReset=S,u.inflateReset2=C,u.inflateResetKeep=k,u.inflateInit=function(x){return V(x,15)},u.inflateInit2=V,u.inflate=function(x,E){var i,D,X,L,Q,M,ee,R,z,J,K,G,ce,me,ae,se,pe,de,Ae,Se,t,j,T,w,b=0,A=new e.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return s;(i=x.state).mode===12&&(i.mode=13),Q=x.next_out,X=x.output,ee=x.avail_out,L=x.next_in,D=x.input,M=x.avail_in,R=i.hold,z=i.bits,J=M,K=ee,j=_;e:for(;;)switch(i.mode){case g:if(i.wrap===0){i.mode=13;break}for(;z<16;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(2&i.wrap&&R===35615){A[i.check=0]=255&R,A[1]=R>>>8&255,i.check=r(i.check,A,2,0),z=R=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&R)<<8)+(R>>8))%31){x.msg="incorrect header check",i.mode=30;break}if((15&R)!=8){x.msg="unknown compression method",i.mode=30;break}if(z-=4,t=8+(15&(R>>>=4)),i.wbits===0)i.wbits=t;else if(t>i.wbits){x.msg="invalid window size",i.mode=30;break}i.dmax=1<<t,x.adler=i.check=1,i.mode=512&R?10:12,z=R=0;break;case 2:for(;z<16;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(i.flags=R,(255&i.flags)!=8){x.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){x.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=R>>8&1),512&i.flags&&(A[0]=255&R,A[1]=R>>>8&255,i.check=r(i.check,A,2,0)),z=R=0,i.mode=3;case 3:for(;z<32;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.head&&(i.head.time=R),512&i.flags&&(A[0]=255&R,A[1]=R>>>8&255,A[2]=R>>>16&255,A[3]=R>>>24&255,i.check=r(i.check,A,4,0)),z=R=0,i.mode=4;case 4:for(;z<16;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.head&&(i.head.xflags=255&R,i.head.os=R>>8),512&i.flags&&(A[0]=255&R,A[1]=R>>>8&255,i.check=r(i.check,A,2,0)),z=R=0,i.mode=5;case 5:if(1024&i.flags){for(;z<16;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.length=R,i.head&&(i.head.extra_len=R),512&i.flags&&(A[0]=255&R,A[1]=R>>>8&255,i.check=r(i.check,A,2,0)),z=R=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(M<(G=i.length)&&(G=M),G&&(i.head&&(t=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),e.arraySet(i.head.extra,D,L,G,t)),512&i.flags&&(i.check=r(i.check,D,G,L)),M-=G,L+=G,i.length-=G),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(M===0)break e;for(G=0;t=D[L+G++],i.head&&t&&i.length<65536&&(i.head.name+=String.fromCharCode(t)),t&&G<M;);if(512&i.flags&&(i.check=r(i.check,D,G,L)),M-=G,L+=G,t)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(M===0)break e;for(G=0;t=D[L+G++],i.head&&t&&i.length<65536&&(i.head.comment+=String.fromCharCode(t)),t&&G<M;);if(512&i.flags&&(i.check=r(i.check,D,G,L)),M-=G,L+=G,t)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;z<16;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(R!==(65535&i.check)){x.msg="header crc mismatch",i.mode=30;break}z=R=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),x.adler=i.check=0,i.mode=12;break;case 10:for(;z<32;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}x.adler=i.check=d(R),z=R=0,i.mode=11;case 11:if(i.havedict===0)return x.next_out=Q,x.avail_out=ee,x.next_in=L,x.avail_in=M,i.hold=R,i.bits=z,2;x.adler=i.check=1,i.mode=12;case 12:if(E===5||E===6)break e;case 13:if(i.last){R>>>=7&z,z-=7&z,i.mode=27;break}for(;z<3;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}switch(i.last=1&R,z-=1,3&(R>>>=1)){case 0:i.mode=14;break;case 1:if(U(i),i.mode=20,E!==6)break;R>>>=2,z-=2;break e;case 2:i.mode=17;break;case 3:x.msg="invalid block type",i.mode=30}R>>>=2,z-=2;break;case 14:for(R>>>=7&z,z-=7&z;z<32;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if((65535&R)!=(R>>>16^65535)){x.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&R,z=R=0,i.mode=15,E===6)break e;case 15:i.mode=16;case 16:if(G=i.length){if(M<G&&(G=M),ee<G&&(G=ee),G===0)break e;e.arraySet(X,D,L,G,Q),M-=G,L+=G,ee-=G,Q+=G,i.length-=G;break}i.mode=12;break;case 17:for(;z<14;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(i.nlen=257+(31&R),R>>>=5,z-=5,i.ndist=1+(31&R),R>>>=5,z-=5,i.ncode=4+(15&R),R>>>=4,z-=4,286<i.nlen||30<i.ndist){x.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;z<3;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.lens[$[i.have++]]=7&R,R>>>=3,z-=3}for(;i.have<19;)i.lens[$[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,T={bits:i.lenbits},j=f(0,i.lens,0,19,i.lencode,0,i.work,T),i.lenbits=T.bits,j){x.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;se=(b=i.lencode[R&(1<<i.lenbits)-1])>>>16&255,pe=65535&b,!((ae=b>>>24)<=z);){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(pe<16)R>>>=ae,z-=ae,i.lens[i.have++]=pe;else{if(pe===16){for(w=ae+2;z<w;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(R>>>=ae,z-=ae,i.have===0){x.msg="invalid bit length repeat",i.mode=30;break}t=i.lens[i.have-1],G=3+(3&R),R>>>=2,z-=2}else if(pe===17){for(w=ae+3;z<w;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}z-=ae,t=0,G=3+(7&(R>>>=ae)),R>>>=3,z-=3}else{for(w=ae+7;z<w;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}z-=ae,t=0,G=11+(127&(R>>>=ae)),R>>>=7,z-=7}if(i.have+G>i.nlen+i.ndist){x.msg="invalid bit length repeat",i.mode=30;break}for(;G--;)i.lens[i.have++]=t}}if(i.mode===30)break;if(i.lens[256]===0){x.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,T={bits:i.lenbits},j=f(m,i.lens,0,i.nlen,i.lencode,0,i.work,T),i.lenbits=T.bits,j){x.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,T={bits:i.distbits},j=f(p,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,T),i.distbits=T.bits,j){x.msg="invalid distances set",i.mode=30;break}if(i.mode=20,E===6)break e;case 20:i.mode=21;case 21:if(6<=M&&258<=ee){x.next_out=Q,x.avail_out=ee,x.next_in=L,x.avail_in=M,i.hold=R,i.bits=z,c(x,K),Q=x.next_out,X=x.output,ee=x.avail_out,L=x.next_in,D=x.input,M=x.avail_in,R=i.hold,z=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;se=(b=i.lencode[R&(1<<i.lenbits)-1])>>>16&255,pe=65535&b,!((ae=b>>>24)<=z);){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(se&&(240&se)==0){for(de=ae,Ae=se,Se=pe;se=(b=i.lencode[Se+((R&(1<<de+Ae)-1)>>de)])>>>16&255,pe=65535&b,!(de+(ae=b>>>24)<=z);){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}R>>>=de,z-=de,i.back+=de}if(R>>>=ae,z-=ae,i.back+=ae,i.length=pe,se===0){i.mode=26;break}if(32&se){i.back=-1,i.mode=12;break}if(64&se){x.msg="invalid literal/length code",i.mode=30;break}i.extra=15&se,i.mode=22;case 22:if(i.extra){for(w=i.extra;z<w;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.length+=R&(1<<i.extra)-1,R>>>=i.extra,z-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;se=(b=i.distcode[R&(1<<i.distbits)-1])>>>16&255,pe=65535&b,!((ae=b>>>24)<=z);){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if((240&se)==0){for(de=ae,Ae=se,Se=pe;se=(b=i.distcode[Se+((R&(1<<de+Ae)-1)>>de)])>>>16&255,pe=65535&b,!(de+(ae=b>>>24)<=z);){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}R>>>=de,z-=de,i.back+=de}if(R>>>=ae,z-=ae,i.back+=ae,64&se){x.msg="invalid distance code",i.mode=30;break}i.offset=pe,i.extra=15&se,i.mode=24;case 24:if(i.extra){for(w=i.extra;z<w;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}i.offset+=R&(1<<i.extra)-1,R>>>=i.extra,z-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){x.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(ee===0)break e;if(G=K-ee,i.offset>G){if((G=i.offset-G)>i.whave&&i.sane){x.msg="invalid distance too far back",i.mode=30;break}ce=G>i.wnext?(G-=i.wnext,i.wsize-G):i.wnext-G,G>i.length&&(G=i.length),me=i.window}else me=X,ce=Q-i.offset,G=i.length;for(ee<G&&(G=ee),ee-=G,i.length-=G;X[Q++]=me[ce++],--G;);i.length===0&&(i.mode=21);break;case 26:if(ee===0)break e;X[Q++]=i.length,ee--,i.mode=21;break;case 27:if(i.wrap){for(;z<32;){if(M===0)break e;M--,R|=D[L++]<<z,z+=8}if(K-=ee,x.total_out+=K,i.total+=K,K&&(x.adler=i.check=i.flags?r(i.check,X,K,Q-K):a(i.check,X,K,Q-K)),K=ee,(i.flags?R:d(R))!==i.check){x.msg="incorrect data check",i.mode=30;break}z=R=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;z<32;){if(M===0)break e;M--,R+=D[L++]<<z,z+=8}if(R!==(4294967295&i.total)){x.msg="incorrect length check",i.mode=30;break}z=R=0}i.mode=29;case 29:j=1;break e;case 30:j=-3;break e;case 31:return-4;case 32:default:return s}return x.next_out=Q,x.avail_out=ee,x.next_in=L,x.avail_in=M,i.hold=R,i.bits=z,(i.wsize||K!==x.avail_out&&i.mode<30&&(i.mode<27||E!==4))&&q(x,x.output,x.next_out,K-x.avail_out)?(i.mode=31,-4):(J-=x.avail_in,K-=x.avail_out,x.total_in+=J,x.total_out+=K,i.total+=K,i.wrap&&K&&(x.adler=i.check=i.flags?r(i.check,X,K,x.next_out-K):a(i.check,X,K,x.next_out-K)),x.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(J==0&&K===0||E===4)&&j===_&&(j=-5),j)},u.inflateEnd=function(x){if(!x||!x.state)return s;var E=x.state;return E.window&&(E.window=null),x.state=null,_},u.inflateGetHeader=function(x,E){var i;return x&&x.state?(2&(i=x.state).wrap)==0?s:((i.head=E).done=!1,_):s},u.inflateSetDictionary=function(x,E){var i,D=E.length;return x&&x.state?(i=x.state).wrap!==0&&i.mode!==11?s:i.mode===11&&a(1,E,D,0)!==i.check?-3:q(x,E,D,D)?(i.mode=31,-4):(i.havedict=1,_):s},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,h,u){var e=o("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(m,p,_,s,g,l,v,d){var y,k,S,C,V,B,P,I,U,q=d.bits,x=0,E=0,i=0,D=0,X=0,L=0,Q=0,M=0,ee=0,R=0,z=null,J=0,K=new e.Buf16(16),G=new e.Buf16(16),ce=null,me=0;for(x=0;x<=15;x++)K[x]=0;for(E=0;E<s;E++)K[p[_+E]]++;for(X=q,D=15;1<=D&&K[D]===0;D--);if(D<X&&(X=D),D===0)return g[l++]=20971520,g[l++]=20971520,d.bits=1,0;for(i=1;i<D&&K[i]===0;i++);for(X<i&&(X=i),x=M=1;x<=15;x++)if(M<<=1,(M-=K[x])<0)return-1;if(0<M&&(m===0||D!==1))return-1;for(G[1]=0,x=1;x<15;x++)G[x+1]=G[x]+K[x];for(E=0;E<s;E++)p[_+E]!==0&&(v[G[p[_+E]]++]=E);if(B=m===0?(z=ce=v,19):m===1?(z=a,J-=257,ce=r,me-=257,256):(z=c,ce=f,-1),x=i,V=l,Q=E=R=0,S=-1,C=(ee=1<<(L=X))-1,m===1&&852<ee||m===2&&592<ee)return 1;for(;;){for(P=x-Q,U=v[E]<B?(I=0,v[E]):v[E]>B?(I=ce[me+v[E]],z[J+v[E]]):(I=96,0),y=1<<x-Q,i=k=1<<L;g[V+(R>>Q)+(k-=y)]=P<<24|I<<16|U|0,k!==0;);for(y=1<<x-1;R&y;)y>>=1;if(y!==0?(R&=y-1,R+=y):R=0,E++,--K[x]==0){if(x===D)break;x=p[_+v[E]]}if(X<x&&(R&C)!==S){for(Q===0&&(Q=X),V+=i,M=1<<(L=x-Q);L+Q<D&&!((M-=K[L+Q])<=0);)L++,M<<=1;if(ee+=1<<L,m===1&&852<ee||m===2&&592<ee)return 1;g[S=R&C]=X<<24|L<<16|V-l|0}}return R!==0&&(g[V+R]=x-Q<<24|64<<16|0),d.bits=X,0}},{"../utils/common":41}],51:[function(o,h,u){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,h,u){var e=o("../utils/common"),a=0,r=1;function c(b){for(var A=b.length;0<=--A;)b[A]=0}var f=0,m=29,p=256,_=p+1+m,s=30,g=19,l=2*_+1,v=15,d=16,y=7,k=256,S=16,C=17,V=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(_+2));c(q);var x=new Array(2*s);c(x);var E=new Array(512);c(E);var i=new Array(256);c(i);var D=new Array(m);c(D);var X,L,Q,M=new Array(s);function ee(b,A,$,W,O){this.static_tree=b,this.extra_bits=A,this.extra_base=$,this.elems=W,this.max_length=O,this.has_stree=b&&b.length}function R(b,A){this.dyn_tree=b,this.max_code=0,this.stat_desc=A}function z(b){return b<256?E[b]:E[256+(b>>>7)]}function J(b,A){b.pending_buf[b.pending++]=255&A,b.pending_buf[b.pending++]=A>>>8&255}function K(b,A,$){b.bi_valid>d-$?(b.bi_buf|=A<<b.bi_valid&65535,J(b,b.bi_buf),b.bi_buf=A>>d-b.bi_valid,b.bi_valid+=$-d):(b.bi_buf|=A<<b.bi_valid&65535,b.bi_valid+=$)}function G(b,A,$){K(b,$[2*A],$[2*A+1])}function ce(b,A){for(var $=0;$|=1&b,b>>>=1,$<<=1,0<--A;);return $>>>1}function me(b,A,$){var W,O,Z=new Array(v+1),Y=0;for(W=1;W<=v;W++)Z[W]=Y=Y+$[W-1]<<1;for(O=0;O<=A;O++){var H=b[2*O+1];H!==0&&(b[2*O]=ce(Z[H]++,H))}}function ae(b){var A;for(A=0;A<_;A++)b.dyn_ltree[2*A]=0;for(A=0;A<s;A++)b.dyn_dtree[2*A]=0;for(A=0;A<g;A++)b.bl_tree[2*A]=0;b.dyn_ltree[2*k]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function se(b){8<b.bi_valid?J(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function pe(b,A,$,W){var O=2*A,Z=2*$;return b[O]<b[Z]||b[O]===b[Z]&&W[A]<=W[$]}function de(b,A,$){for(var W=b.heap[$],O=$<<1;O<=b.heap_len&&(O<b.heap_len&&pe(A,b.heap[O+1],b.heap[O],b.depth)&&O++,!pe(A,W,b.heap[O],b.depth));)b.heap[$]=b.heap[O],$=O,O<<=1;b.heap[$]=W}function Ae(b,A,$){var W,O,Z,Y,H=0;if(b.last_lit!==0)for(;W=b.pending_buf[b.d_buf+2*H]<<8|b.pending_buf[b.d_buf+2*H+1],O=b.pending_buf[b.l_buf+H],H++,W===0?G(b,O,A):(G(b,(Z=i[O])+p+1,A),(Y=B[Z])!==0&&K(b,O-=D[Z],Y),G(b,Z=z(--W),$),(Y=P[Z])!==0&&K(b,W-=M[Z],Y)),H<b.last_lit;);G(b,k,A)}function Se(b,A){var $,W,O,Z=A.dyn_tree,Y=A.stat_desc.static_tree,H=A.stat_desc.has_stree,ne=A.stat_desc.elems,oe=-1;for(b.heap_len=0,b.heap_max=l,$=0;$<ne;$++)Z[2*$]!==0?(b.heap[++b.heap_len]=oe=$,b.depth[$]=0):Z[2*$+1]=0;for(;b.heap_len<2;)Z[2*(O=b.heap[++b.heap_len]=oe<2?++oe:0)]=1,b.depth[O]=0,b.opt_len--,H&&(b.static_len-=Y[2*O+1]);for(A.max_code=oe,$=b.heap_len>>1;1<=$;$--)de(b,Z,$);for(O=ne;$=b.heap[1],b.heap[1]=b.heap[b.heap_len--],de(b,Z,1),W=b.heap[1],b.heap[--b.heap_max]=$,b.heap[--b.heap_max]=W,Z[2*O]=Z[2*$]+Z[2*W],b.depth[O]=(b.depth[$]>=b.depth[W]?b.depth[$]:b.depth[W])+1,Z[2*$+1]=Z[2*W+1]=O,b.heap[1]=O++,de(b,Z,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(ie,we){var Ze,Ie,He,fe,Xe,mt,Be=we.dyn_tree,Ct=we.max_code,mn=we.stat_desc.static_tree,pn=we.stat_desc.has_stree,vn=we.stat_desc.extra_bits,At=we.stat_desc.extra_base,Ge=we.stat_desc.max_length,Je=0;for(fe=0;fe<=v;fe++)ie.bl_count[fe]=0;for(Be[2*ie.heap[ie.heap_max]+1]=0,Ze=ie.heap_max+1;Ze<l;Ze++)Ge<(fe=Be[2*Be[2*(Ie=ie.heap[Ze])+1]+1]+1)&&(fe=Ge,Je++),Be[2*Ie+1]=fe,Ct<Ie||(ie.bl_count[fe]++,Xe=0,At<=Ie&&(Xe=vn[Ie-At]),mt=Be[2*Ie],ie.opt_len+=mt*(fe+Xe),pn&&(ie.static_len+=mt*(mn[2*Ie+1]+Xe)));if(Je!==0){do{for(fe=Ge-1;ie.bl_count[fe]===0;)fe--;ie.bl_count[fe]--,ie.bl_count[fe+1]+=2,ie.bl_count[Ge]--,Je-=2}while(0<Je);for(fe=Ge;fe!==0;fe--)for(Ie=ie.bl_count[fe];Ie!==0;)Ct<(He=ie.heap[--Ze])||(Be[2*He+1]!==fe&&(ie.opt_len+=(fe-Be[2*He+1])*Be[2*He],Be[2*He+1]=fe),Ie--)}}(b,A),me(Z,oe,b.bl_count)}function t(b,A,$){var W,O,Z=-1,Y=A[1],H=0,ne=7,oe=4;for(Y===0&&(ne=138,oe=3),A[2*($+1)+1]=65535,W=0;W<=$;W++)O=Y,Y=A[2*(W+1)+1],++H<ne&&O===Y||(H<oe?b.bl_tree[2*O]+=H:O!==0?(O!==Z&&b.bl_tree[2*O]++,b.bl_tree[2*S]++):H<=10?b.bl_tree[2*C]++:b.bl_tree[2*V]++,Z=O,oe=(H=0)===Y?(ne=138,3):O===Y?(ne=6,3):(ne=7,4))}function j(b,A,$){var W,O,Z=-1,Y=A[1],H=0,ne=7,oe=4;for(Y===0&&(ne=138,oe=3),W=0;W<=$;W++)if(O=Y,Y=A[2*(W+1)+1],!(++H<ne&&O===Y)){if(H<oe)for(;G(b,O,b.bl_tree),--H!=0;);else O!==0?(O!==Z&&(G(b,O,b.bl_tree),H--),G(b,S,b.bl_tree),K(b,H-3,2)):H<=10?(G(b,C,b.bl_tree),K(b,H-3,3)):(G(b,V,b.bl_tree),K(b,H-11,7));Z=O,oe=(H=0)===Y?(ne=138,3):O===Y?(ne=6,3):(ne=7,4)}}c(M);var T=!1;function w(b,A,$,W){K(b,(f<<1)+(W?1:0),3),function(O,Z,Y,H){se(O),J(O,Y),J(O,~Y),e.arraySet(O.pending_buf,O.window,Z,Y,O.pending),O.pending+=Y}(b,A,$)}u._tr_init=function(b){T||(function(){var A,$,W,O,Z,Y=new Array(v+1);for(O=W=0;O<m-1;O++)for(D[O]=W,A=0;A<1<<B[O];A++)i[W++]=O;for(i[W-1]=O,O=Z=0;O<16;O++)for(M[O]=Z,A=0;A<1<<P[O];A++)E[Z++]=O;for(Z>>=7;O<s;O++)for(M[O]=Z<<7,A=0;A<1<<P[O]-7;A++)E[256+Z++]=O;for($=0;$<=v;$++)Y[$]=0;for(A=0;A<=143;)q[2*A+1]=8,A++,Y[8]++;for(;A<=255;)q[2*A+1]=9,A++,Y[9]++;for(;A<=279;)q[2*A+1]=7,A++,Y[7]++;for(;A<=287;)q[2*A+1]=8,A++,Y[8]++;for(me(q,_+1,Y),A=0;A<s;A++)x[2*A+1]=5,x[2*A]=ce(A,5);X=new ee(q,B,p+1,_,v),L=new ee(x,P,0,s,v),Q=new ee(new Array(0),I,0,g,y)}(),T=!0),b.l_desc=new R(b.dyn_ltree,X),b.d_desc=new R(b.dyn_dtree,L),b.bl_desc=new R(b.bl_tree,Q),b.bi_buf=0,b.bi_valid=0,ae(b)},u._tr_stored_block=w,u._tr_flush_block=function(b,A,$,W){var O,Z,Y=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(H){var ne,oe=4093624447;for(ne=0;ne<=31;ne++,oe>>>=1)if(1&oe&&H.dyn_ltree[2*ne]!==0)return a;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return r;for(ne=32;ne<p;ne++)if(H.dyn_ltree[2*ne]!==0)return r;return a}(b)),Se(b,b.l_desc),Se(b,b.d_desc),Y=function(H){var ne;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),Se(H,H.bl_desc),ne=g-1;3<=ne&&H.bl_tree[2*U[ne]+1]===0;ne--);return H.opt_len+=3*(ne+1)+5+5+4,ne}(b),O=b.opt_len+3+7>>>3,(Z=b.static_len+3+7>>>3)<=O&&(O=Z)):O=Z=$+5,$+4<=O&&A!==-1?w(b,A,$,W):b.strategy===4||Z===O?(K(b,2+(W?1:0),3),Ae(b,q,x)):(K(b,4+(W?1:0),3),function(H,ne,oe,ie){var we;for(K(H,ne-257,5),K(H,oe-1,5),K(H,ie-4,4),we=0;we<ie;we++)K(H,H.bl_tree[2*U[we]+1],3);j(H,H.dyn_ltree,ne-1),j(H,H.dyn_dtree,oe-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,Y+1),Ae(b,b.dyn_ltree,b.dyn_dtree)),ae(b),W&&se(b)},u._tr_tally=function(b,A,$){return b.pending_buf[b.d_buf+2*b.last_lit]=A>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&A,b.pending_buf[b.l_buf+b.last_lit]=255&$,b.last_lit++,A===0?b.dyn_ltree[2*$]++:(b.matches++,A--,b.dyn_ltree[2*(i[$]+p+1)]++,b.dyn_dtree[2*z(A)]++),b.last_lit===b.lit_bufsize-1},u._tr_align=function(b){K(b,2,3),G(b,k,q),function(A){A.bi_valid===16?(J(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(o,h,u){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,h,u){(function(e){(function(a,r){if(!a.setImmediate){var c,f,m,p,_=1,s={},g=!1,l=a.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(a);v=v&&v.setTimeout?v:a,c={}.toString.call(a.process)==="[object process]"?function(S){process.nextTick(function(){y(S)})}:function(){if(a.postMessage&&!a.importScripts){var S=!0,C=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=C,S}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(S){a.postMessage(p+S,"*")}):a.MessageChannel?((m=new MessageChannel).port1.onmessage=function(S){y(S.data)},function(S){m.port2.postMessage(S)}):l&&"onreadystatechange"in l.createElement("script")?(f=l.documentElement,function(S){var C=l.createElement("script");C.onreadystatechange=function(){y(S),C.onreadystatechange=null,f.removeChild(C),C=null},f.appendChild(C)}):function(S){setTimeout(y,0,S)},v.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var C=new Array(arguments.length-1),V=0;V<C.length;V++)C[V]=arguments[V+1];var B={callback:S,args:C};return s[_]=B,c(_),_++},v.clearImmediate=d}function d(S){delete s[S]}function y(S){if(g)setTimeout(y,0,S);else{var C=s[S];if(C){g=!0;try{(function(V){var B=V.callback,P=V.args;switch(P.length){case 0:B();break;case 1:B(P[0]);break;case 2:B(P[0],P[1]);break;case 3:B(P[0],P[1],P[2]);break;default:B.apply(r,P)}})(C)}finally{d(S),g=!1}}}}function k(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(p)===0&&y(+S.data.slice(p.length))}})(typeof self>"u"?e===void 0?this:e:self)}).call(this,typeof Te<"u"?Te:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(_t)),_t.exports}var Pr=Vr();const zt=cn(Pr);var at={exports:{}},Fr=at.exports,Bt;function Tr(){return Bt||(Bt=1,function(n,F){(function(o,h){h()})(Fr,function(){function o(f,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function h(f,m,p){var _=new XMLHttpRequest;_.open("GET",f),_.responseType="blob",_.onload=function(){c(_.response,m,p)},_.onerror=function(){console.error("could not download file")},_.send()}function u(f){var m=new XMLHttpRequest;m.open("HEAD",f,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function e(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(m)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Te=="object"&&Te.global===Te?Te:void 0,r=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(f,m,p){var _=a.URL||a.webkitURL,s=document.createElement("a");m=m||f.name||"download",s.download=m,s.rel="noopener",typeof f=="string"?(s.href=f,s.origin===location.origin?e(s):u(s.href)?h(f,m,p):e(s,s.target="_blank")):(s.href=_.createObjectURL(f),setTimeout(function(){_.revokeObjectURL(s.href)},4e4),setTimeout(function(){e(s)},0))}:"msSaveOrOpenBlob"in navigator?function(f,m,p){if(m=m||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(o(f,p),m);else if(u(f))h(f,m,p);else{var _=document.createElement("a");_.href=f,_.target="_blank",setTimeout(function(){e(_)})}}:function(f,m,p,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof f=="string")return h(f,m,p);var s=f.type==="application/octet-stream",g=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&g||r)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var k=v.result;k=l?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=k:location=k,_=null},v.readAsDataURL(f)}else{var d=a.URL||a.webkitURL,y=d.createObjectURL(f);_?_.location=y:location.href=y,_=null,setTimeout(function(){d.revokeObjectURL(y)},4e4)}});a.saveAs=c.saveAs=c,n.exports=c})}(at)),at.exports}var Dr=Tr();const Ot=cn(Dr);class Ur{constructor(){Qe(this,"VERSION","5.199");Qe(this,"setError");Qe(this,"t");this.setError=xt().setError,this.t=$e().t}getAlbumDetails(F,o){return new Promise((h,u)=>{if(o<0){const a=o===-6?this.t("wall_photos"):o===-7?this.t("profile_photos"):`${this.t("system_album")} ${o}`;h({id:o,owner_id:F,title:a,size:0,system:!0});return}const e={owner_id:F,album_ids:o,v:this.VERSION};console.log("Getting album details for:",o),VK.Api.call("photos.getAlbums",e,a=>{a.response&&a.response.items&&a.response.items.length>0?(console.log("Album details response:",a.response.items[0]),h(a.response.items[0])):(console.error("Error getting album details:",a),u(new Error("Failed to get album details")))})})}getUserAlbums(F,o){return new Promise(async(h,u)=>{if(typeof o=="number"&&o<0){const a=o===-6?this.t("wall_photos"):o===-7?this.t("profile_photos"):`${this.t("system_album")} ${o}`;h({count:1,items:[{id:o,owner_id:F,title:a,size:0,thumb_id:0,thumb_src:"",system:!0}]});return}if(typeof o=="number"&&o>0){try{console.log(`Getting details for specific album: ${o}`);const a=await this.getAlbumDetails(F,o);h({count:1,items:[{...a,id:a.id||o,owner_id:a.owner_id||F,title:a.title||this.t("album")+" "+o,size:a.size||0,thumb_id:a.thumb_id||0,thumb_src:a.thumb_src||"",system:!1}]})}catch(a){console.error("Failed to get album details, using fallback:",a),h({count:1,items:[{id:o,owner_id:F,title:this.t("album")+" "+o,size:0,thumb_id:0,thumb_src:"",system:!1}]})}return}const e={owner_id:F,v:this.VERSION,need_system:1};o==="all"?console.log("Fetching ALL albums"):typeof o=="number"&&!isNaN(o)&&(e.album_ids=o),VK.Api.call("photos.getAlbums",e,a=>{a.response?h(a.response):(console.error("API Error:",a),this.setError(this.t("error_fetching")),u(new Error(this.t("error_fetching"))))})})}getUserPhotos(F,o){let u=0;const e=()=>new Promise((r,c)=>{const f=`return API.photos.get({
          "album_id": ${o},
          "owner_id": ${F},
          "count": 1000,
          "offset": ${u},
          "need_system": 1,
          "v": "${this.VERSION}"
        });`;VK.Api.call("execute",{code:f,v:this.VERSION},m=>{m.response?r(m.response.items):(c(new Error("Error fetching photos")),console.log(m))})}),a=async()=>{try{const r=await e();if(r.length===1e3){u+=1e3;const c=await a();return[...r,...c]}return r}catch(r){throw console.error("Error fetching all photos:",r),r}};return a().then(r=>(console.log("All photos fetched",r.length),r.length?r:[])).catch(r=>(console.error("Error in getUserPhotos:",r),this.setError(this.t("error_fetching")),[]))}extractLargestImages(F){var o;if(!F||F.length===0)return console.warn("No images provided to extractLargestImages"),"";try{const h={s:1,m:2,o:3,p:4,q:5,r:6,x:7,y:8,z:9,w:10};return F.some(e=>e.width>0)?[...F].sort((a,r)=>r.width-a.width)[0].url:[...F].sort((e,a)=>{const r=h[e.type]||0;return(h[a.type]||0)-r})[0].url}catch(h){return console.error("Error extracting largest image:",h),((o=F[0])==null?void 0:o.url)||""}}getPhotoLikes(F,o){return new Promise((h,u)=>{const e={type:"photo",owner_id:F,item_id:o,v:this.VERSION};VK.Api.call("likes.getList",e,a=>{a.response?h({count:a.response.count,users:a.response.items||[]}):(console.error("Error getting likes:",a),h({count:0,users:[]}))})})}getPhotoComments(F,o){return new Promise((h,u)=>{const e={owner_id:F,photo_id:o,count:100,sort:"desc",v:this.VERSION};VK.Api.call("photos.getComments",e,a=>{a.response?h({count:a.response.count,items:a.response.items||[]}):(console.error("Error getting comments:",a),h({count:0,items:[]}))})})}async getPhotoMetadata(F,o,h){var u;try{const[e,a]=await Promise.all([this.getPhotoLikes(F,o),this.getPhotoComments(F,o)]);return{photo_id:o,owner_id:F,date:new Date(h.date*1e3).toISOString(),text:h.text||"",likes:{count:e.count,users:e.users},comments:{count:a.count,items:a.items.map(r=>({id:r.id,from_id:r.from_id,date:new Date(r.date*1e3).toISOString(),text:r.text,likes:r.likes||{count:0}}))},tags:((u=h.tags)==null?void 0:u.map(r=>({user_id:r.user_id,tagged_name:r.tagged_name,x:r.x,y:r.y,x2:r.x2,y2:r.y2})))||[],album_id:h.album_id,width:h.width,height:h.height,sizes:h.sizes}}catch(e){return console.error("Error getting photo metadata:",e),{photo_id:o,owner_id:F,date:h.date?new Date(h.date*1e3).toISOString():new Date().toISOString(),text:h.text||"",likes:{count:0,users:[]},comments:{count:0,items:[]},tags:[],error:"Failed to fetch complete metadata"}}}createMetadataJson(F){return JSON.stringify(F,null,2)}}const Lr={key:0},Nr={key:1,class:"d-flex align-content-start flex-wrap"},jr=We({__name:"DownloadActions",props:{downloadAs:{type:String,default:""},loading:{type:Boolean,default:!1},selectedItems:{type:Array,default:()=>[]},results:{type:Object,default:()=>({})},selectedCount:{type:String,required:!0}},emits:["download","select-all"],setup(n){const{t:F}=$e();return(o,h)=>(he(),Ce("div",null,[n.downloadAs==="photos"?(he(),Ce("div",Lr,[N(Pe,{loading:n.loading,onClick:h[0]||(h[0]=u=>o.$emit("download"))},{default:ue(()=>[Ee(ge(re(F)("download_by_photos")),1)]),_:1},8,["loading"])])):Ve("",!0),n.downloadAs==="albums"?(he(),Ce("div",Nr,[N(Pe,{disabled:!n.selectedItems.length,loading:n.loading,style:{"margin-bottom":"20px"},onClick:h[1]||(h[1]=u=>o.$emit("download"))},{default:ue(()=>[Ee(ge(n.selectedCount),1)]),_:1},8,["disabled","loading"]),N(Pe,{onClick:h[2]||(h[2]=u=>o.$emit("select-all"))},{default:ue(()=>{var u;return[Ee(ge(n.selectedItems.length===((u=n.results.items)==null?void 0:u.length)?re(F)("download_all_albums_deselect"):re(F)("download_all_albums_select")),1)]}),_:1})])):Ve("",!0)]))}}),$r=We({__name:"StatusDisplay",props:{message:{type:String,default:""},loading:{type:Boolean,default:!1},albumName:{type:String,default:""},progress:{type:Number,default:0}},setup(n){const{t:F}=$e();return(o,h)=>(he(),Re(kt,null,{default:ue(()=>[N(De,null,{default:ue(()=>[Ke("h2",null,ge(n.message),1)]),_:1}),n.loading?(he(),Re(De,{key:0},{default:ue(()=>[Ke("p",null,ge(re(F)("download_process")),1)]),_:1})):Ve("",!0),N(De,null,{default:ue(()=>[Ke("div",null,ge(n.albumName),1),n.loading?(he(),Re(Gn,{key:0,"model-value":n.progress,color:"primary",height:"25",rounded:""},{default:ue(()=>[Ke("strong",null,ge(Math.ceil(n.progress))+"%",1)]),_:1},8,["model-value"])):Ve("",!0)]),_:1})]),_:1}))}}),Mr=Zt("v-alert-title"),Wr=["success","info","warning","error"],Zr=ve({border:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["top","end","bottom","start"].includes(n)},borderColor:String,closable:Boolean,closeIcon:{type:Oe,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:n=>Wr.includes(n)},...ze(),...wt(),...Qt(),...$n(),...Xn(),...Yn(),...qt(),...jn(),...Ye(),...Nn({variant:"flat"})},"VAlert"),Hr=be()({name:"VAlert",props:Zr(),emits:{"click:close":n=>!0,"update:modelValue":n=>!0},setup(n,F){let{emit:o,slots:h}=F;const u=xe(n,"modelValue"),e=te(()=>{if(n.icon!==!1)return n.type?n.icon??`$${n.type}`:n.icon}),a=te(()=>({color:n.color??n.type,variant:n.variant})),{themeClasses:r}=bt(n),{colorClasses:c,colorStyles:f,variantClasses:m}=Un(a),{densityClasses:p}=yt(n),{dimensionStyles:_}=Jt(n),{elevationClasses:s}=Ln(n),{locationStyles:g}=Kn(n),{positionClasses:l}=qn(n),{roundedClasses:v}=Yt(n),{textColorClasses:d,textColorStyles:y}=dt(_e(n,"borderColor")),{t:k}=Tt(),S=te(()=>({"aria-label":k(n.closeLabel),onClick(C){u.value=!1,o("click:close",C)}}));return()=>{const C=!!(h.prepend||e.value),V=!!(h.title||n.title),B=!!(h.close||n.closable);return u.value&&N(n.tag,{class:["v-alert",n.border&&{"v-alert--border":!!n.border,[`v-alert--border-${n.border===!0?"start":n.border}`]:!0},{"v-alert--prominent":n.prominent},r.value,c.value,p.value,s.value,l.value,v.value,m.value,n.class],style:[f.value,_.value,g.value,n.style],role:"alert"},{default:()=>{var P,I;return[Mn(!1,"v-alert"),n.border&&N("div",{key:"border",class:["v-alert__border",d.value],style:y.value},null),C&&N("div",{key:"prepend",class:"v-alert__prepend"},[h.prepend?N(st,{key:"prepend-defaults",disabled:!e.value,defaults:{VIcon:{density:n.density,icon:e.value,size:n.prominent?44:28}}},h.prepend):N(ct,{key:"prepend-icon",density:n.density,icon:e.value,size:n.prominent?44:28},null)]),N("div",{class:"v-alert__content"},[V&&N(Mr,{key:"title"},{default:()=>{var U;return[((U=h.title)==null?void 0:U.call(h))??n.title]}}),((P=h.text)==null?void 0:P.call(h))??n.text,(I=h.default)==null?void 0:I.call(h)]),h.append&&N("div",{key:"append",class:"v-alert__append"},[h.append()]),B&&N("div",{key:"close",class:"v-alert__close"},[h.close?N(st,{key:"close-defaults",defaults:{VBtn:{icon:n.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var U;return[(U=h.close)==null?void 0:U.call(h,{props:S.value})]}}):N(Pe,ke({key:"close-btn",icon:n.closeIcon,size:"x-small",variant:"text"},S.value),null)])]}})}}}),dn=Symbol.for("vuetify:selection-control-group"),fn=ve({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Oe,trueIcon:Oe,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:zn},...ze(),...wt(),...Ye()},"SelectionControlGroup"),Gr=ve({...fn({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");be()({name:"VSelectionControlGroup",props:Gr(),emits:{"update:modelValue":n=>!0},setup(n,F){let{slots:o}=F;const h=xe(n,"modelValue"),u=je(),e=te(()=>n.id||`v-selection-control-group-${u}`),a=te(()=>n.name||e.value),r=new Set;return Vt(dn,{modelValue:h,forceUpdate:()=>{r.forEach(c=>c())},onForceUpdate:c=>{r.add(c),On(()=>{r.delete(c)})}}),Bn({[n.defaultsTarget]:{color:_e(n,"color"),disabled:_e(n,"disabled"),density:_e(n,"density"),error:_e(n,"error"),inline:_e(n,"inline"),modelValue:h,multiple:te(()=>!!n.multiple||n.multiple==null&&Array.isArray(h.value)),name:a,falseIcon:_e(n,"falseIcon"),trueIcon:_e(n,"trueIcon"),readonly:_e(n,"readonly"),ripple:_e(n,"ripple"),type:_e(n,"type"),valueComparator:_e(n,"valueComparator")}}),ye(()=>{var c;return N("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":n.inline},n.class],style:n.style,role:n.type==="radio"?"radiogroup":void 0},[(c=o.default)==null?void 0:c.call(o)])}),{}}});const St=ve({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ze(),...fn()},"VSelectionControl");function Kr(n){const F=Pt(dn,void 0),{densityClasses:o}=yt(n),h=xe(n,"modelValue"),u=te(()=>n.trueValue!==void 0?n.trueValue:n.value!==void 0?n.value:!0),e=te(()=>n.falseValue!==void 0?n.falseValue:!1),a=te(()=>!!n.multiple||n.multiple==null&&Array.isArray(h.value)),r=te({get(){const s=F?F.modelValue.value:h.value;return a.value?Ne(s).some(g=>n.valueComparator(g,u.value)):n.valueComparator(s,u.value)},set(s){if(n.readonly)return;const g=s?u.value:e.value;let l=g;a.value&&(l=s?[...Ne(h.value),g]:Ne(h.value).filter(v=>!n.valueComparator(v,u.value))),F?F.modelValue.value=l:h.value=l}}),{textColorClasses:c,textColorStyles:f}=dt(te(()=>{if(!(n.error||n.disabled))return r.value?n.color:n.baseColor})),{backgroundColorClasses:m,backgroundColorStyles:p}=Xt(te(()=>r.value&&!n.error&&!n.disabled?n.color:n.baseColor)),_=te(()=>r.value?n.trueIcon:n.falseIcon);return{group:F,densityClasses:o,trueValue:u,falseValue:e,model:r,textColorClasses:c,textColorStyles:f,backgroundColorClasses:m,backgroundColorStyles:p,icon:_}}const ot=be()({name:"VSelectionControl",directives:{Ripple:Wn},inheritAttrs:!1,props:St(),emits:{"update:modelValue":n=>!0},setup(n,F){let{attrs:o,slots:h}=F;const{group:u,densityClasses:e,icon:a,model:r,textColorClasses:c,textColorStyles:f,backgroundColorClasses:m,backgroundColorStyles:p,trueValue:_}=Kr(n),s=je(),g=qe(!1),l=qe(!1),v=le(),d=te(()=>n.id||`input-${s}`),y=te(()=>!n.disabled&&!n.readonly);u==null||u.onForceUpdate(()=>{v.value&&(v.value.checked=r.value)});function k(B){y.value&&(g.value=!0,Rn(B.target,":focus-visible")!==!1&&(l.value=!0))}function S(){g.value=!1,l.value=!1}function C(B){B.stopPropagation()}function V(B){if(!y.value){v.value&&(v.value.checked=r.value);return}n.readonly&&u&&it(()=>u.forceUpdate()),r.value=B.target.checked}return ye(()=>{var q,x;const B=h.label?h.label({label:n.label,props:{for:d.value}}):n.label,[P,I]=ut(o),U=N("input",ke({ref:v,checked:r.value,disabled:!!n.disabled,id:d.value,onBlur:S,onFocus:k,onInput:V,"aria-disabled":!!n.disabled,"aria-label":n.label,type:n.type,value:_.value,name:n.name,"aria-checked":n.type==="checkbox"?r.value:void 0},I),null);return N("div",ke({class:["v-selection-control",{"v-selection-control--dirty":r.value,"v-selection-control--disabled":n.disabled,"v-selection-control--error":n.error,"v-selection-control--focused":g.value,"v-selection-control--focus-visible":l.value,"v-selection-control--inline":n.inline},e.value,n.class]},P,{style:n.style}),[N("div",{class:["v-selection-control__wrapper",c.value],style:f.value},[(q=h.default)==null?void 0:q.call(h,{backgroundColorClasses:m,backgroundColorStyles:p}),lt(N("div",{class:["v-selection-control__input"]},[((x=h.input)==null?void 0:x.call(h,{model:r,textColorClasses:c,textColorStyles:f,backgroundColorClasses:m,backgroundColorStyles:p,inputNode:U,icon:a.value,props:{onFocus:k,onBlur:S,id:d.value}}))??N(Le,null,[a.value&&N(ct,{key:"icon",icon:a.value},null),U])]),[[$t("ripple"),n.ripple&&[!n.disabled&&!n.readonly,null,["center","circle"]]]])]),B&&N(an,{for:d.value,onClick:C},{default:()=>[B]})])}),{isFocused:g,input:v}}}),hn=ve({indeterminate:Boolean,indeterminateIcon:{type:Oe,default:"$checkboxIndeterminate"},...St({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Rt=be()({name:"VCheckboxBtn",props:hn(),emits:{"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,F){let{slots:o}=F;const h=xe(n,"indeterminate"),u=xe(n,"modelValue");function e(c){h.value&&(h.value=!1)}const a=te(()=>h.value?n.indeterminateIcon:n.falseIcon),r=te(()=>h.value?n.indeterminateIcon:n.trueIcon);return ye(()=>{const c=Wt(ot.filterProps(n),["modelValue"]);return N(ot,ke(c,{modelValue:u.value,"onUpdate:modelValue":[f=>u.value=f,e],class:["v-checkbox-btn",n.class],style:n.style,type:"checkbox",falseIcon:a.value,trueIcon:r.value,"aria-checked":h.value?"mixed":void 0}),o)}),{}}}),qr=ve({...ht(),...Wt(hn(),["inline"])},"VCheckbox"),nt=be()({name:"VCheckbox",inheritAttrs:!1,props:qr(),emits:{"update:modelValue":n=>!0,"update:focused":n=>!0},setup(n,F){let{attrs:o,slots:h}=F;const u=xe(n,"modelValue"),{isFocused:e,focus:a,blur:r}=ft(n),c=je(),f=te(()=>n.id||`checkbox-${c}`);return ye(()=>{const[m,p]=ut(o),_=Me.filterProps(n),s=Rt.filterProps(n);return N(Me,ke({class:["v-checkbox",n.class]},m,_,{modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,id:f.value,focused:e.value,style:n.style}),{...h,default:g=>{let{id:l,messagesId:v,isDisabled:d,isReadonly:y,isValid:k}=g;return N(Rt,ke(s,{id:l.value,"aria-describedby":v.value,disabled:d.value,readonly:y.value},p,{error:k.value===!1,modelValue:u.value,"onUpdate:modelValue":S=>u.value=S,onFocus:a,onBlur:r}),h)}})}),{}}}),Yr=ve({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ht(),...St()},"VSwitch"),Xr=be()({name:"VSwitch",inheritAttrs:!1,props:Yr(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,F){let{attrs:o,slots:h}=F;const u=xe(n,"indeterminate"),e=xe(n,"modelValue"),{loaderClasses:a}=en(n),{isFocused:r,focus:c,blur:f}=ft(n),m=le(),p=Vn&&window.matchMedia("(forced-colors: active)").matches,_=te(()=>typeof n.loading=="string"&&n.loading!==""?n.loading:n.color),s=je(),g=te(()=>n.id||`switch-${s}`);function l(){u.value&&(u.value=!1)}function v(d){var y,k;d.stopPropagation(),d.preventDefault(),(k=(y=m.value)==null?void 0:y.input)==null||k.click()}return ye(()=>{const[d,y]=ut(o),k=Me.filterProps(n),S=ot.filterProps(n);return N(Me,ke({class:["v-switch",{"v-switch--flat":n.flat},{"v-switch--inset":n.inset},{"v-switch--indeterminate":u.value},a.value,n.class]},d,k,{modelValue:e.value,"onUpdate:modelValue":C=>e.value=C,id:g.value,focused:r.value,style:n.style}),{...h,default:C=>{let{id:V,messagesId:B,isDisabled:P,isReadonly:I,isValid:U}=C;const q={model:e,isValid:U};return N(ot,ke({ref:m},S,{modelValue:e.value,"onUpdate:modelValue":[x=>e.value=x,l],id:V.value,"aria-describedby":B.value,type:"checkbox","aria-checked":u.value?"mixed":void 0,disabled:P.value,readonly:I.value,onFocus:c,onBlur:f},y),{...h,default:x=>{let{backgroundColorClasses:E,backgroundColorStyles:i}=x;return N("div",{class:["v-switch__track",p?void 0:E.value],style:i.value,onClick:v},[h["track-true"]&&N("div",{key:"prepend",class:"v-switch__track-true"},[h["track-true"](q)]),h["track-false"]&&N("div",{key:"append",class:"v-switch__track-false"},[h["track-false"](q)])])},input:x=>{let{inputNode:E,icon:i,backgroundColorClasses:D,backgroundColorStyles:X}=x;return N(Le,null,[E,N("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":i||n.loading},n.inset||p?void 0:D.value],style:n.inset?void 0:X.value},[h.thumb?N(st,{defaults:{VIcon:{icon:i,size:"x-small"}}},{default:()=>[h.thumb({...q,icon:i})]}):N(Zn,null,{default:()=>[n.loading?N(tn,{name:"v-switch",active:!0,color:U.value===!1?void 0:_.value},{default:L=>h.loader?h.loader(L):N(Jn,{active:L.isActive,color:L.color,indeterminate:!0,size:"16",width:"2"},null)}):i&&N(ct,{key:String(i),icon:i,size:"x-small"},null)]})])])}})}})}),{}}}),Jr={key:0,class:"metadata-options"},Qr=We({__name:"MetadataSettings",props:{enabled:{type:Boolean,default:!1},defaultOptions:{type:Object,default:()=>({likes:!0,comments:!0,tags:!0,dateInfo:!0})}},emits:["update:enabled","update:options"],setup(n,{emit:F}){const o=n,h=F,{t:u}=$e(),e=le(o.enabled),a=le({...o.defaultOptions}),r=()=>{h("update:options",a.value)};return Fe(()=>o.enabled,c=>{e.value=c}),Fe(()=>o.defaultOptions,c=>{a.value={...c}},{deep:!0}),(c,f)=>{const m=nr;return he(),Re(Qn,{class:"metadata-settings"},{default:ue(()=>[N(er,null,{default:ue(()=>[N(m,{name:"mdi:information-outline"}),Ee(" "+ge(re(u)("metadata_settings")),1)]),_:1}),N(tr,null,{default:ue(()=>[N(Xr,{modelValue:re(e),"onUpdate:modelValue":[f[0]||(f[0]=p=>rt(e)?e.value=p:null),f[1]||(f[1]=p=>h("update:enabled",p))],label:re(u)("include_metadata"),color:"primary"},null,8,["modelValue","label"]),re(e)?(he(),Ce("div",Jr,[N(nt,{modelValue:re(a).likes,"onUpdate:modelValue":[f[2]||(f[2]=p=>re(a).likes=p),r],label:re(u)("include_likes"),density:"compact"},null,8,["modelValue","label"]),N(nt,{modelValue:re(a).comments,"onUpdate:modelValue":[f[3]||(f[3]=p=>re(a).comments=p),r],label:re(u)("include_comments"),density:"compact"},null,8,["modelValue","label"]),N(nt,{modelValue:re(a).tags,"onUpdate:modelValue":[f[4]||(f[4]=p=>re(a).tags=p),r],label:re(u)("include_tags"),density:"compact"},null,8,["modelValue","label"]),N(nt,{modelValue:re(a).dateInfo,"onUpdate:modelValue":[f[5]||(f[5]=p=>re(a).dateInfo=p),r],label:re(u)("include_date_info"),density:"compact"},null,8,["modelValue","label"])])):Ve("",!0),re(e)?(he(),Re(Hr,{key:1,type:"info",variant:"tonal",class:"mt-3"},{text:ue(()=>[Ee(ge(re(u)("metadata_warning")),1)]),_:1})):Ve("",!0)]),_:1})]),_:1})}}}),ea=Pn(Qr,[["__scopeId","data-v-33a2b768"]]),ta={key:0},la=We({__name:"index",setup(n){const{$token:F}=Mt(),o=new Ur,h=le(""),u=le({}),{t:e}=$e(),a=le(""),{setError:r}=xt(),c=le(""),f=le(!1),m=le([]),p=le(""),_=le(0),s=le(""),g=le(!1),l=le({likes:!0,comments:!0,tags:!0,dateInfo:!0});Fn({title:()=>e("title"),meta:[{property:"og:title",content:()=>e("title")},{name:"description",content:()=>e("use")},{property:"og:description",content:()=>e("use")},{property:"og:image",content:"/vk4y/og-image.svg"}]});const v=[P=>!!P||e("url_not_url"),P=>/^((?:https?:\/\/)?[^./]+(?:\.[^./]+)+(?:\/.*)?)$/.test(P)||e("url_not_valid"),P=>P.includes("vk.com")||e("url_not_vk"),P=>P.includes("album")||e("url_not_album"),P=>P.includes("https://")||e("url_not_https")],d=te(()=>v.every(P=>P(h.value)===!0)),y=te(()=>m.value.length?`${e("download")} ${m.value.length} ${e("albums")}`:e("download_by_album"));function k(){h.value="",c.value="",a.value="",u.value={},m.value=[],_.value=0,s.value=""}function S(){const I=new URL(h.value).pathname;let U;const q=I.match(/^\/albums(-?\d+)$/),x=I.match(/^\/album(-?\d+)_(saved|0{1,3}|\d+)$/);if(q)p.value=q[1],a.value="albums";else if(x){p.value=x[1];const E=x[2];U=E==="0"?-6:E==="00"?-7:E==="000"?"saved":parseInt(E,10),console.log(`Album match: owner_id=${p.value}, albumIdPart=${E}, parsed album_id=${U}`),typeof U=="number"&&U>0?(a.value="photos",console.log(`Regular album detected: ${U}`)):(a.value="photos",console.log(`System album detected: ${U}`)),parseInt(p.value)<0&&typeof U=="number"&&U<0&&console.log(`System album for group: ${p.value}, album: ${U}`)}else{c.value=e("url_not_valid");return}if(U==="saved"){c.value=e("error_saved")+" https://vk.com/movephotos";return}o.getUserAlbums(p.value,U).then(E=>{E.items.length>0?(u.value=E,a.value==="albums"?c.value=`${e("found")} ${E.items.length} ${e("albums")}`:o.getUserPhotos(p.value,String(E.items[0].id)).then(i=>{console.log(`Found ${i.length} photos in the album "${E.items[0].title}"`),E.items[0].size=i.length,c.value=`${e("found")} ${i.length} ${e("photos")} ${e("album")} ${E.items[0].title}`}).catch(i=>{console.error("Error fetching photos:",i),c.value=`${e("found")} ${E.items[0].size||0} ${e("photos")} ${e("album")} ${E.items[0].title}`})):(c.value=e("error_find"),u.value={},a.value="")}).catch(E=>{console.error(E),r(e("error_fetching")),c.value=e("error_find"),u.value={},a.value=""})}async function C(){try{f.value=!0,c.value=e("preparing_download"),_.value=0;const P=a.value==="albums"?m.value:u.value.items||[];P.length>10&&(c.value=e("download_all_too_many"));for(const I of P){c.value=e("fetching_photos_for")+": "+I.title;const U=await o.getUserPhotos(p.value,String(I.id));if(!U||U.length===0){r(e("error_no_result"));continue}_.value=0,s.value=I.title,c.value=e("downloading")+": "+I.title;const q=1500;let x=0,E=0,i=1,D=new zt;for(const[X,L]of U.entries())try{const Q=o.extractLargestImages(L.sizes),M=await fetch(Q);if(!M.ok)continue;const ee=await M.blob(),R=M.headers.get("Content-Type")||"image/jpeg";let z="jpg";if(R.includes("/")){const J=R.split("/");J.length>1&&(z=J[1].replace("jpeg","jpg"))}if(D.file(`image_${E}.${z}`,ee),g.value)try{const J=await o.getPhotoMetadata(p.value,L.id,L),K=o.createMetadataJson(J);D.file(`image_${E}_metadata.json`,K)}catch(J){console.error("Error getting metadata for photo:",L.id,J)}if(x++,E++,_.value=(X+1)/U.length*100,x>=q){const J=U.length>q?`${I.title}_part${i}.zip`:`${I.title}.zip`;try{const K=await D.generateAsync({type:"blob"});Ot.saveAs(K,J),setTimeout(()=>{URL.revokeObjectURL(URL.createObjectURL(K))},1e3)}catch(K){console.error(K),r(e("error_creating_zip"))}D=new zt,i++,x=0}URL.revokeObjectURL(Q)}catch(Q){console.error("Error processing photo:",Q)}if(x>0){const X=U.length>q?`${I.title}_part${i}.zip`:`${I.title}.zip`;try{const L=await D.generateAsync({type:"blob"});Ot.saveAs(L,X),setTimeout(()=>{URL.revokeObjectURL(URL.createObjectURL(L))},1e3)}catch(L){console.error(L),r(e("error_creating_zip"))}}}c.value=e("done"),f.value=!1,_.value=0,h.value="",a.value="",u.value={},m.value=[],s.value=""}catch(P){console.error(P),r(e("error_creating_zip")),f.value=!1}}const V=P=>{const I=m.value.findIndex(U=>U.id===P.id);I!==-1?m.value.splice(I,1):m.value.push(P)},B=()=>{var P,I;m.value.length===((P=u.value.items)==null?void 0:P.length)?m.value=[]:m.value=((I=u.value.items)==null?void 0:I.map(U=>({...U})))||[]};return(P,I)=>{const U=Cr,q=Ir,x=Rr;return he(),Ce("div",null,[re(F)?(he(),Ce("div",ta,[N(U,{modelValue:re(h),"onUpdate:modelValue":I[0]||(I[0]=E=>rt(h)?h.value=E:null),"is-valid":re(d),onCheck:S,onClear:k},null,8,["modelValue","is-valid"]),N($r,{message:re(c),loading:re(f),"album-name":re(s),progress:re(_)},null,8,["message","loading","album-name","progress"]),re(u).items&&re(u).items.length>0?(he(),Re(ea,{key:0,enabled:re(g),"onUpdate:enabled":I[1]||(I[1]=E=>rt(g)?g.value=E:null),options:re(l),"onUpdate:options":I[2]||(I[2]=E=>rt(l)?l.value=E:null)},null,8,["enabled","options"])):Ve("",!0),N(kt,{align:"start"},{default:ue(()=>[N(De,{md:"8"},{default:ue(()=>[re(a)==="albums"?(he(),Re(q,{key:0,albums:re(u).items||[],"selected-items":re(m),onToggleSelection:V},null,8,["albums","selected-items"])):Ve("",!0)]),_:1}),N(De,{md:"4"},{default:ue(()=>[N(jr,{"download-as":re(a),loading:re(f),"selected-items":re(m),results:re(u),"selected-count":re(y),onDownload:C,onSelectAll:B},null,8,["download-as","loading","selected-items","results","selected-count"])]),_:1})]),_:1})])):Ve("",!0),N(x)])}}});export{la as default};
